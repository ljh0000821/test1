(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-task-defect-defect-add"],{"06d2":function(e,t,a){"use strict";a.r(t);var i=a("2000"),o=a("2efe");for(var n in o)"default"!==n&&function(e){a.d(t,e,(function(){return o[e]}))}(n);a("baec");var r,d=a("f0c5"),s=Object(d["a"])(o["default"],i["b"],i["c"],!1,null,"57058984",null,!1,i["a"],r);t["default"]=s.exports},"1b82":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */\r\n/*每个页面公共css */uni-page-body[data-v-37c2fa84]{background-color:#dde4f2;font-family:PingFangSC-Medium,PingFang SC}.flex-center[data-v-37c2fa84]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-around[data-v-37c2fa84]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-around;justify-content:space-around;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-between[data-v-37c2fa84]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-start[data-v-37c2fa84]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-end[data-v-37c2fa84]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-column[data-v-37c2fa84]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.flex-wrap[data-v-37c2fa84]{-webkit-flex-wrap:wrap;flex-wrap:wrap}.flex[data-v-37c2fa84]{display:-webkit-box;display:-webkit-flex;display:flex}.flex1[data-v-37c2fa84]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.align-center[data-v-37c2fa84]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.text-center[data-v-37c2fa84]{text-align:center}.m-8[data-v-37c2fa84]{margin:%?8?%}.m-16[data-v-37c2fa84]{margin:%?16?%}.p-8[data-v-37c2fa84]{padding:%?8?%}.p-16[data-v-37c2fa84]{padding:%?16?%}.m-t-16[data-v-37c2fa84]{margin-top:%?16?%}.m-t-8[data-v-37c2fa84]{margin-top:%?8?%}.m-t-24[data-v-37c2fa84]{margin-top:%?24?%}.m-t-32[data-v-37c2fa84]{margin-top:%?32?%}.m-t-40[data-v-37c2fa84]{margin-top:%?40?%}.m-l-16[data-v-37c2fa84]{margin-left:%?16?%}.m-l-24[data-v-37c2fa84]{margin-left:%?24?%}.m-l-32[data-v-37c2fa84]{margin-left:%?32?%}.m-l-40[data-v-37c2fa84]{margin-left:%?40?%}.m-l-8[data-v-37c2fa84]{margin-left:%?8?%}.m-r-8[data-v-37c2fa84]{margin-right:%?8?%}.m-r-16[data-v-37c2fa84]{margin-right:%?16?%}.m-r-24[data-v-37c2fa84]{margin-right:%?24?%}.m-b-16[data-v-37c2fa84]{margin-bottom:%?16?%}.m-b-32[data-v-37c2fa84]{margin-bottom:%?32?%}.p-l-8[data-v-37c2fa84]{padding-left:%?8?%}.p-l-16[data-v-37c2fa84]{padding-left:%?16?%}.p-b-24[data-v-37c2fa84]{padding-bottom:%?24?%}.p-b-32[data-v-37c2fa84]{padding-bottom:%?32?%}.p-b-48[data-v-37c2fa84]{padding-bottom:%?48?%}.text-ellipsis[data-v-37c2fa84]{width:0;overflow:hidden;\r\n  /*超出部分隐藏*/white-space:nowrap;\r\n  /*不换行*/text-overflow:ellipsis\r\n  /*超出部分文字以...显示*/}.container[data-v-37c2fa84]{margin:0 %?16?%;background:#fff;-webkit-box-shadow:0 %?4?% %?16?% 0 rgba(14,23,37,.08);box-shadow:0 %?4?% %?16?% 0 rgba(14,23,37,.08);-webkit-border-radius:%?24?%;border-radius:%?24?%;padding:%?15?% %?40?%;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden}.ef-btn[data-v-37c2fa84]{width:%?200?%;height:%?60?%!important;-webkit-box-shadow:0 %?4?% %?16?% 0 rgba(14,23,37,.08);box-shadow:0 %?4?% %?16?% 0 rgba(14,23,37,.08);-webkit-border-radius:%?30?%;border-radius:%?30?%;margin-top:%?50?%;background-color:#05b2cc!important;font-size:%?24?%!important}.bg-orange[data-v-37c2fa84]{background-color:#f7b500}.bg-blue[data-v-37c2fa84]{background-color:#05b2cc}.bg-green[data-v-37c2fa84]{background-color:#00be27}.base-green-text[data-v-37c2fa84]{color:#05b2cc}.gray-text[data-v-37c2fa84]{color:#97a4ae}.green-text[data-v-37c2fa84]{color:#05b2cc}.red-text[data-v-37c2fa84]{color:red}.orange-text[data-v-37c2fa84]{color:orange}.border-b-gray[data-v-37c2fa84]{padding-bottom:%?16?%;border-bottom:1px solid #dde4f2}.title-icon[data-v-37c2fa84]{height:%?32?%}.ef-btn-normal[data-v-37c2fa84]{width:%?200?%;height:%?60?%!important;margin:%?20?% auto}.btn-primary[data-v-37c2fa84]{background-color:#05b2cc!important;color:#fff!important}.btn-normal[data-v-37c2fa84]{color:#05b2cc!important}.my-video[data-v-37c2fa84]{position:fixed;top:0;left:0;bottom:0;right:0;height:100%;width:100%;background-color:rgba(0,0,0,.5);z-index:3000}.container[data-v-37c2fa84]{margin-top:%?20?%}.slot-content[data-v-37c2fa84]{padding:%?20?%;-webkit-box-sizing:border-box;box-sizing:border-box;margin:%?20?% 0}.slot-content[data-v-37c2fa84] .u-input{border:1px solid #999;-webkit-border-radius:%?10?%;border-radius:%?10?%}.slot-content[data-v-37c2fa84] .u-input .uni-textarea-textarea{padding:0 %?20?%;-webkit-box-sizing:border-box;box-sizing:border-box}.slot-content[data-v-37c2fa84] .u-input .uni-textarea-placeholder{padding:0 %?20?%;-webkit-box-sizing:border-box;box-sizing:border-box}.tower[data-v-37c2fa84]{-webkit-flex-wrap:wrap;flex-wrap:wrap}.tower .tower-list[data-v-37c2fa84]{width:20%;position:relative;padding-top:20px;padding-left:10px;margin-top:10px;color:#333}.tower .tower-list .uni-icons[data-v-37c2fa84]{position:absolute;right:0;top:0}.tower .clear[data-v-37c2fa84]{width:100%;color:red;margin-top:10px}.custom-style[data-v-37c2fa84]{background-color:#05b2cc!important;color:#fff}.f-s-24[data-v-37c2fa84]{font-size:%?24?%}.btn[data-v-37c2fa84]{width:%?200?%;height:%?60?%!important;margin-top:%?24?%}.btn-plain[data-v-37c2fa84]{color:#05b2cc}body.?%PAGE?%[data-v-37c2fa84]{background-color:#dde4f2}',""]),e.exports=t},2e3:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i}));var i={customNavbar:a("384b").default,uToast:a("4463").default},o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("custom-navbar",{attrs:{title:"新缺陷",iconLeft:!0}}),a("v-uni-view",{staticClass:"container"},[a("DefectForm",{ref:"DefectForm",attrs:{baseData:e.baseData}})],1),a("u-toast",{ref:"uToast"})],1)},n=[]},2628:function(e,t,a){"use strict";var i=a("7f2a"),o=a.n(i);o.a},"2e3f":function(e,t,a){"use strict";var i=a("dbce");Object.defineProperty(t,"__esModule",{value:!0}),t.defOverdue=t.defFindByDef=t.defSaveOrUpdate=t.defclaDetail=t.deflist=void 0;var o=i(a("5f30")),n=function(e){return(0,o.default)({url:"/blade-sd/def/list",method:"get",data:e})};t.deflist=n;var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({url:"/blade-sd/defcla/detail",method:"get",data:e})};t.defclaDetail=r;var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({url:"/blade-sd/def/saveOrUpdate",method:"post",data:e})};t.defSaveOrUpdate=d;var s=function(e){return(0,o.default)({url:"/blade-sd/def/findByDef/"+e,method:"get"})};t.defFindByDef=s;var l=function(){return(0,o.default)({url:"/blade-sd/def/overdue",method:"get"})};t.defOverdue=l},"2efe":function(e,t,a){"use strict";a.r(t);var i=a("511c"),o=a.n(i);for(var n in i)"default"!==n&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=o.a},"511c":function(e,t,a){"use strict";var i=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a("ae8d")),n={components:{DefectForm:o.default},data:function(){return{baseData:{}}},onLoad:function(e){this.baseData=e.info?JSON.parse(decodeURIComponent(e.info||{})):{}},onReady:function(){},methods:{}};t.default=n},"51c9":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */\r\n/*每个页面公共css */uni-page-body[data-v-57058984]{background-color:#dde4f2;font-family:PingFangSC-Medium,PingFang SC}.flex-center[data-v-57058984]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-around[data-v-57058984]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-around;justify-content:space-around;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-between[data-v-57058984]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-start[data-v-57058984]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-end[data-v-57058984]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-column[data-v-57058984]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.flex-wrap[data-v-57058984]{-webkit-flex-wrap:wrap;flex-wrap:wrap}.flex[data-v-57058984]{display:-webkit-box;display:-webkit-flex;display:flex}.flex1[data-v-57058984]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.align-center[data-v-57058984]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.text-center[data-v-57058984]{text-align:center}.m-8[data-v-57058984]{margin:%?8?%}.m-16[data-v-57058984]{margin:%?16?%}.p-8[data-v-57058984]{padding:%?8?%}.p-16[data-v-57058984]{padding:%?16?%}.m-t-16[data-v-57058984]{margin-top:%?16?%}.m-t-8[data-v-57058984]{margin-top:%?8?%}.m-t-24[data-v-57058984]{margin-top:%?24?%}.m-t-32[data-v-57058984]{margin-top:%?32?%}.m-t-40[data-v-57058984]{margin-top:%?40?%}.m-l-16[data-v-57058984]{margin-left:%?16?%}.m-l-24[data-v-57058984]{margin-left:%?24?%}.m-l-32[data-v-57058984]{margin-left:%?32?%}.m-l-40[data-v-57058984]{margin-left:%?40?%}.m-l-8[data-v-57058984]{margin-left:%?8?%}.m-r-8[data-v-57058984]{margin-right:%?8?%}.m-r-16[data-v-57058984]{margin-right:%?16?%}.m-r-24[data-v-57058984]{margin-right:%?24?%}.m-b-16[data-v-57058984]{margin-bottom:%?16?%}.m-b-32[data-v-57058984]{margin-bottom:%?32?%}.p-l-8[data-v-57058984]{padding-left:%?8?%}.p-l-16[data-v-57058984]{padding-left:%?16?%}.p-b-24[data-v-57058984]{padding-bottom:%?24?%}.p-b-32[data-v-57058984]{padding-bottom:%?32?%}.p-b-48[data-v-57058984]{padding-bottom:%?48?%}.text-ellipsis[data-v-57058984]{width:0;overflow:hidden;\r\n  /*超出部分隐藏*/white-space:nowrap;\r\n  /*不换行*/text-overflow:ellipsis\r\n  /*超出部分文字以...显示*/}.container[data-v-57058984]{margin:0 %?16?%;background:#fff;-webkit-box-shadow:0 %?4?% %?16?% 0 rgba(14,23,37,.08);box-shadow:0 %?4?% %?16?% 0 rgba(14,23,37,.08);-webkit-border-radius:%?24?%;border-radius:%?24?%;padding:%?15?% %?40?%;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden}.ef-btn[data-v-57058984]{width:%?200?%;height:%?60?%!important;-webkit-box-shadow:0 %?4?% %?16?% 0 rgba(14,23,37,.08);box-shadow:0 %?4?% %?16?% 0 rgba(14,23,37,.08);-webkit-border-radius:%?30?%;border-radius:%?30?%;margin-top:%?50?%;background-color:#05b2cc!important;font-size:%?24?%!important}.bg-orange[data-v-57058984]{background-color:#f7b500}.bg-blue[data-v-57058984]{background-color:#05b2cc}.bg-green[data-v-57058984]{background-color:#00be27}.base-green-text[data-v-57058984]{color:#05b2cc}.gray-text[data-v-57058984]{color:#97a4ae}.green-text[data-v-57058984]{color:#05b2cc}.red-text[data-v-57058984]{color:red}.orange-text[data-v-57058984]{color:orange}.border-b-gray[data-v-57058984]{padding-bottom:%?16?%;border-bottom:1px solid #dde4f2}.title-icon[data-v-57058984]{height:%?32?%}.ef-btn-normal[data-v-57058984]{width:%?200?%;height:%?60?%!important;margin:%?20?% auto}.btn-primary[data-v-57058984]{background-color:#05b2cc!important;color:#fff!important}.btn-normal[data-v-57058984]{color:#05b2cc!important}.my-video[data-v-57058984]{position:fixed;top:0;left:0;bottom:0;right:0;height:100%;width:100%;background-color:rgba(0,0,0,.5);z-index:3000}.container[data-v-57058984]{margin-top:%?20?%}body.?%PAGE?%[data-v-57058984]{background-color:#dde4f2}',""]),e.exports=t},6270:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i}));var i={uForm:a("586b").default,uFormItem:a("e2f4").default,uButton:a("147a").default,uInput:a("87aa").default,uToast:a("4463").default},o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("u-form",{ref:"uForm",attrs:{model:e.form,"error-type":["toast"]}},[a("u-form-item",{attrs:{label:"线路","label-width":"150",prop:"lineName"}},[a("efItem",{attrs:{data:e.dy_XSXL,modelId:e.form.lineId,type:"add"===e.type||"edit"===e.type?"lines":"label"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"lineId",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"lineId",t)},input:function(t){arguments[0]=t=e.$handleEvent(t),e.lineChange.apply(void 0,arguments)}},model:{value:e.form.lineName,callback:function(t){e.$set(e.form,"lineName",t)},expression:"form.lineName"}})],1),a("u-form-item",{attrs:{label:"杆塔","label-width":"150","label-position":"top",prop:"twrCode"}},[a("v-uni-view",{staticClass:"flex1"},[a("efItem",{attrs:{data:e.dy_invtwrList,require:e.form.lineName,errMessage:"请先选择线路",modelId:e.form.twrId,type:"add"===e.type||"edit"===e.type?"towers":"label",position:!0,name:"twrCode",id:"id"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"twrId",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"twrId",t)},change:function(t){arguments[0]=t=e.$handleEvent(t),function(t){return e.towerChange(t)}.apply(void 0,arguments)}},model:{value:e.form.twrCode,callback:function(t){e.$set(e.form,"twrCode",t)},expression:"form.twrCode"}})],1)],1),a("u-form-item",{attrs:{label:"电压等级","label-width":"150",prop:"voltage"}},[a("efItem",{attrs:{isRightIcon:!1,placeholder:""},model:{value:e.form.voltage,callback:function(t){e.$set(e.form,"voltage",t)},expression:"form.voltage"}})],1),a("u-form-item",{attrs:{label:"杆塔型号","label-width":"150",prop:"modCode"}},[a("efItem",{attrs:{isRightIcon:!1,placeholder:""},model:{value:e.form.modCode,callback:function(t){e.$set(e.form,"modCode",t)},expression:"form.modCode"}})],1),a("u-form-item",{attrs:{label:"部件","label-width":"150",prop:"defType"}},[a("efItem",{attrs:{data:e.formList.dy_defType,type:"add"===e.type||"edit"===e.type?"select":"label",name:"text",id:"id"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),function(t){return e.onChange("defType",t)}.apply(void 0,arguments)}},model:{value:e.form.defType,callback:function(t){e.$set(e.form,"defType",t)},expression:"form.defType"}})],1),e.form.defType&&!["基础","附属设施","接地装置","杆塔"].includes(e.form.defType)?a("u-form-item",{attrs:{prop:"location",label:"大小号侧","label-width":"150"}},[a("efItem",{attrs:{data:e.formList.dy_location,modelId:e.form.location,type:"add"===e.type||"edit"===e.type?"select":"label",name:"dictValue",id:"dictKey"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"location",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"location",t)}},model:{value:e.form.locationName,callback:function(t){e.$set(e.form,"locationName",t)},expression:"form.locationName"}})],1):e._e(),e.form.defType&&!["基础","附属设施","接地装置","杆塔"].includes(e.form.defType)?a("u-form-item",{attrs:{prop:"phase",label:"相别","label-width":"150"}},[a("efItem",{attrs:{data:e.formList.dy_phase,modelId:e.form.phase,type:"add"===e.type||"edit"===e.type?"select":"label",name:"dictValue",id:"dictKey"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"phase",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"phase",t)}},model:{value:e.form.phaseName,callback:function(t){e.$set(e.form,"phaseName",t)},expression:"form.phaseName"}})],1):e._e(),a("u-form-item",{attrs:{prop:"partsKinds",label:"部件种类","label-width":"150"}},[a("efItem",{attrs:{data:e.formList.dy_partsKinds,require:e.form.defType,errMessage:"请先选择部件",type:"add"===e.type||"edit"===e.type?"select":"label",name:"text",id:"id"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),function(t){return e.onChange("partsKinds",t)}.apply(void 0,arguments)}},model:{value:e.form.partsKinds,callback:function(t){e.$set(e.form,"partsKinds",t)},expression:"form.partsKinds"}})],1),a("u-form-item",{attrs:{prop:"defPos",label:"部位","label-width":"150"}},[a("efItem",{attrs:{data:e.formList.dy_defPos,require:e.form.partsKinds,errMessage:"请先选择部件种类",type:"add"===e.type||"edit"===e.type?"select":"label",name:"text",id:"id"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),function(t){return e.onChange("defPos",t)}.apply(void 0,arguments)}},model:{value:e.form.defPos,callback:function(t){e.$set(e.form,"defPos",t)},expression:"form.defPos"}})],1),a("u-form-item",{attrs:{prop:"defDesc",label:"缺陷描述","label-width":"150"}},[a("efItem",{attrs:{data:e.formList.dy_defDesc,require:e.form.defPos,errMessage:"请先选择部位",type:"add"===e.type||"edit"===e.type?"select":"label",name:"text",id:"id"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),function(t){return e.onChange("defDesc",t)}.apply(void 0,arguments)}},model:{value:e.form.defDesc,callback:function(t){e.$set(e.form,"defDesc",t)},expression:"form.defDesc"}})],1),a("u-form-item",{attrs:{prop:"sortBasis",label:"分类依据","label-width":"150"}},[a("efItem",{attrs:{data:e.formList.dy_sortBasis,require:e.form.defDesc,errMessage:"请先选择缺陷描述",type:"add"===e.type||"edit"===e.type?"select":"label",name:"text",id:"id"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),function(t){return e.onChange("sortBasis",t)}.apply(void 0,arguments)}},model:{value:e.form.sortBasis,callback:function(t){e.$set(e.form,"sortBasis",t)},expression:"form.sortBasis"}})],1),a("u-form-item",{attrs:{prop:"defNature",label:"缺陷性质","label-width":"150"}},[a("efItem",{attrs:{data:e.formList.dy_defNature,require:e.form.sortBasis,errMessage:"请先选择分类依据",type:"add"===e.type||"edit"===e.type?"select":"label",name:"text",id:"id"},model:{value:e.form.defNature,callback:function(t){e.$set(e.form,"defNature",t)},expression:"form.defNature"}})],1),a("u-form-item",{attrs:{prop:"findWay",label:"发现方式","label-width":"150"}},[a("efItem",{attrs:{data:e.formList.dy_findWay,modelId:e.form.findWay,type:"add"===e.type||"edit"===e.type?"select":"label",name:"dictValue",id:"dictKey"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"findWay",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"findWay",t)}},model:{value:e.form.findWayName,callback:function(t){e.$set(e.form,"findWayName",t)},expression:"form.findWayName"}})],1),a("u-form-item",{attrs:{prop:"findDate",label:"发现日期","label-width":"150"}},[a("efItem",{attrs:{endTime:e.$store.state.nowDate,type:"add"===e.type||"edit"===e.type?"time":"label"},model:{value:e.form.findDate,callback:function(t){e.$set(e.form,"findDate",t)},expression:"form.findDate"}})],1),a("u-form-item",{attrs:{prop:"findTeamName",label:"发现班组","label-width":"150"}},[a("efItem",{attrs:{data:e.formList.dy_findTeamName,modelId:e.form.findTeamId,type:"add"===e.type||"edit"===e.type?"select":"label",name:"fullName",id:"id"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"findTeamId",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"findTeamId",t)},change:function(t){arguments[0]=t=e.$handleEvent(t),e.classChange.apply(void 0,arguments)}},model:{value:e.form.findTeamName,callback:function(t){e.$set(e.form,"findTeamName",t)},expression:"form.findTeamName"}})],1),a("u-form-item",{attrs:{label:"发现单位","label-width":"150"}},[a("efItem",{attrs:{data:e.dy_YWDW,modelId:e.form.orgId,type:"add"===e.type||"edit"===e.type?"select":"label",name:"fullName",id:"id"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"orgId",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"orgId",t)}},model:{value:e.form.orgName,callback:function(t){e.$set(e.form,"orgName",t)},expression:"form.orgName"}})],1),a("u-form-item",{attrs:{prop:"findUserName",label:"发现人","label-width":"150"}},[a("efItem",{attrs:{data:e.dy_teamUserList,modelId:e.form.findUserId,multiple:!0,type:"add"===e.type||"edit"===e.type?"people":"label"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"findUserId",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"findUserId",t)}},model:{value:e.form.findUserName,callback:function(t){e.$set(e.form,"findUserName",t)},expression:"form.findUserName"}})],1),a("u-form-item",{attrs:{prop:"plCleorg",label:"计划消缺单位","label-width":"180"}},[a("efItem",{attrs:{data:e.formList.dy_plCleorg,modelId:e.form.plCleorg,type:"add"===e.type||"edit"===e.type?"select":"label",name:"dictValue",id:"dictKey"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"plCleorg",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"plCleorg",t)}},model:{value:e.form.jhxqdw,callback:function(t){e.$set(e.form,"jhxqdw",t)},expression:"form.jhxqdw"}})],1),a("u-form-item",{attrs:{prop:"clePro",label:"处理意见","label-width":"150"}},[a("efItem",{attrs:{data:e.dy_QXCLYJ,name:"dictValue",id:"dictKey",title:"处理意见",canWrite:"add"===e.type||"edit"===e.type,type:"add"===e.type||"edit"===e.type?"select":"label",placeholder:"请输入或选择"},model:{value:e.form.clePro,callback:function(t){e.$set(e.form,"clePro",t)},expression:"form.clePro"}})],1),a("u-form-item",{attrs:{prop:"defReport",label:"缺陷简报","label-width":"150","label-position":"top"}},[a("v-uni-view",{staticClass:"flex1"},[a("efItem",{attrs:{isRightIcon:!1,placeholder:"",position:!0,isRightLabel:!1},scopedSlots:e._u(["add"===e.type||"edit"===e.type?{key:"right",fn:function(){return[a("v-uni-view",{staticClass:"flex1"},[a("u-button",{staticClass:"custom-style",staticStyle:{float:"right"},attrs:{size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.generateDefReport.apply(void 0,arguments)}}},[e._v("生成")])],1)]},proxy:!0}:null],null,!0)}),"add"===e.type||"edit"===e.type?a("v-uni-view",[a("u-input",{attrs:{disabled:"add"!==e.type&&"edit"!==e.type,clearable:"add"===e.type||"edit"===e.type,border:!0,placeholder:"请输入或生成",type:"textarea"},model:{value:e.form.defReport,callback:function(t){e.$set(e.form,"defReport",t)},expression:"form.defReport"}})],1):e._e(),"details"===e.type?a("v-uni-view",{staticClass:"f-s-24"},[e._v(e._s(e.form.defReport))]):e._e()],1)],1),a("u-form-item",{attrs:{prop:"defPicVOList",label:"图片","label-width":"150","label-position":"top"}},[a("chooseImage",{ref:"chooseImage",attrs:{images:e.form.defPicVOList,type:e.type}})],1),a("u-form-item",{attrs:{prop:"defVoiVOList",label:"音频","label-width":"150","label-position":"top"}},[a("chooseAudio",{ref:"chooseAudio",attrs:{audioList:e.form.defVoiVOList,type:e.type}})],1),a("u-form-item",{attrs:{prop:"defVidVOList",label:"视频","label-width":"150","label-position":"top"}},[a("chooseVideo",{ref:"chooseVideo",attrs:{videoList:e.form.defVidVOList,type:e.type}})],1)],1),"add"===e.type?a("u-button",{directives:[{name:"permission",rawName:"v-permission",value:["user","teamLeader","zhuanze"],expression:"['user','teamLeader','zhuanze']"}],staticClass:"btn custom-style",attrs:{type:"primary",shape:"circle",ripple:!0,loading:e.submitLoading},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save(2)}}},[e._v("提交")]):e._e(),"add"===e.type?a("u-button",{directives:[{name:"permission",rawName:"v-permission",value:["user","teamLeader","zhuanze"],expression:"['user','teamLeader','zhuanze']"}],staticClass:"btn btn-plain",attrs:{shape:"circle",ripple:!0,plain:!0,loading:e.saveLoading},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save(1)}}},[e._v("保存")]):e._e(),a("u-toast",{ref:"uToast"})],1)},n=[]},"654f":function(e,t,a){var i=a("51c9");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=a("4f06").default;o("25c9b1e6",i,!0,{sourceMap:!1,shadowMode:!1})},"7f2a":function(e,t,a){var i=a("1b82");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=a("4f06").default;o("2ddc6e72",i,!0,{sourceMap:!1,shadowMode:!1})},"9e0c":function(e,t,a){"use strict";a("d3b7"),Object.defineProperty(t,"__esModule",{value:!0}),t.dictMixins=void 0;var i=a("2e12"),o=a("a78e"),n={data:function(){return{dy_teamUserList:[],dy_invtwrList:[]}},methods:{selectTeamUserList:function(e){var t=this;(0,i.selectTeamUserList)({deptId:e||this.form.teamId}).then((function(e){var a=e.data;t.dy_teamUserList=a.data.records||[]}))},getInvtwrList:function(){var e=this;return new Promise((function(t,a){(0,o.towersPMS)({line:e.form.lineId||""}).then((function(a){var i=a.data;console.log(i,"杆塔data===="),e.dy_invtwrList=i.data.records||[],t(i.data.records)})).catch((function(){a()}))}))}}};t.dictMixins=n},a78e:function(e,t,a){"use strict";var i=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.twrsetSubmit=t.invtwrDetail=t.towersPMS=t.invtwrList=void 0;var o=i(a("5530")),n=i(a("5f30")),r=function(e){return(0,n.default)({url:"/blade-sd/invtwr/listAllByLineID",method:"GET",data:e})};t.invtwrList=r;var d=function(e){return(0,n.default)({url:"/blade-sd/api/towers",method:"GET",data:(0,o.default)({current:1,size:999999},e)})};t.towersPMS=d;var s=function(e){return(0,n.default)({url:"/blade-sd/invtwr/detail",method:"get",data:e})};t.invtwrDetail=s;var l=function(e){return(0,n.default)({url:"/blade-sd/twrset/submit",method:"post",data:e})};t.twrsetSubmit=l},ae8d:function(e,t,a){"use strict";a.r(t);var i=a("6270"),o=a("eff1");for(var n in o)"default"!==n&&function(e){a.d(t,e,(function(){return o[e]}))}(n);a("2628");var r,d=a("f0c5"),s=Object(d["a"])(o["default"],i["b"],i["c"],!1,null,"37c2fa84",null,!1,i["a"],r);t["default"]=s.exports},baec:function(e,t,a){"use strict";var i=a("654f"),o=a.n(i);o.a},edcf:function(e,t,a){"use strict";var i=a("4ea4");a("99af"),a("c740"),a("4160"),a("c975"),a("d81d"),a("a434"),a("d3b7"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var o=i(a("1da1")),n=i(a("5530")),r=a("9e0c"),d=a("2e3f"),s=a("a78e"),l=["defType","partsKinds","defPos","defDesc","sortBasis","defNature"],f={props:{id:{type:String,default:""},type:{type:String,default:"add"},details:{type:Object,default:function(){}},baseData:{type:Object,default:function(){}}},components:{},mixins:[r.dictMixins],data:function(){return{submitLoading:!1,saveLoading:!1,companyName:"国网重庆检修分公司",dy_XSXL:[],dy_QXCLYJ:[],dy_YWDW:[],formList:{dy_defType:[],dy_location:[],dy_phase:[],dy_partsKinds:[],dy_defPos:[],dy_defDesc:[],dy_sortBasis:[],dy_defNature:[],dy_findWay:[],dy_findTeamName:[],dy_plCleorg:[]},form:{insTypeName:"特殊巡视",orgName:"",teamName:"",lineName:"",lineId:"",twrCode:"",modCode:"",voltage:"",defType:"",location:"",phase:"",partsKinds:"",defPos:"",defDesc:"",sortBasis:"",defNature:"",findWay:"",findDate:"",findTeamName:"",findUserName:"",plCleorg:"",clePro:"",defReport:"",defPicVOList:"",defVidVOList:"",defVoiVOList:""},rules:{lineName:[{required:!0,message:"请选择线路"}],twrCode:[{required:!0,message:"请选择杆塔"}],defType:[{required:!0,message:"请选择部件"}],location:[{required:!0,message:"请选择大小号侧"}],phase:[{required:!0,message:"请选择相别"}],partsKinds:[{required:!0,message:"请选择部件种类"}],defPos:[{required:!0,message:"请选择部位"}],defDesc:[{required:!0,message:"请选择缺陷描述"}],sortBasis:[{required:!0,message:"请选择分类依据"}],defNature:[{required:!0,message:"请选择缺陷性质"}],findWay:[{required:!0,message:"请选择发现方式"}],findDate:[{required:!0,message:"请选择发现日期"}],findTeamName:[{required:!0,message:"请选择发现班组"}],findUserName:[{required:!0,message:"请选择发现人"}],plCleorg:[{required:!0,message:"请选择计划消缺单位"}],clePro:[{required:!0,message:"请填写处理意见"}],defReport:[{required:!0,message:"请填写缺陷简报"}]},taskItemList:{equList:[],planItemUserName:[],time:""},dy_risk_level:[]}},created:function(){this.getTypelist(),this._defclaDetail(),this.setBaseData(this.baseData),console.log(this.baseData,"basedata")},mounted:function(){this.$refs.uForm.setRules(this.rules)},watch:{details:{handler:function(e){console.log(e,"缺陷详情defe"),l.forEach((function(t){e[t]=e[t]?e[t]:"空"})),this.form=e,"add"!==this.type&&"edit"!==this.type||(this.getInvtwrList(),this.onChange("defType",!1),this.onChange("partsKinds",!1),this.onChange("defPos",!1),this.onChange("defDesc",!1),this.onChange("sortBasis",!1))},deep:!0},form:{handler:function(){this.$emit("over")},deep:!0}},methods:{setBaseData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.line&&e.lineName&&(this.form.lineId=e.line,this.form.lineName=e.lineName,this.lineChange(),(e.twrId||e.id)&&(e.twrcode||e.twrCode||e.name)&&(this.form.twrId=e.twrId||e.id,this.form.twrCode=e.twrcode||e.twrCode||e.name,this.towerChange()))},getTypelist:function(){var e=this;"details"!=this.type&&(this.$store.dispatch("getList","LOCATION").then((function(t){console.log(t,"大小号侧"),e.formList.dy_location=t})),this.$store.dispatch("getList","phase").then((function(t){console.log(t,"相别"),e.formList.dy_phase=t})),this.$store.dispatch("getList","risk_level").then((function(t){console.log(t,"风险等级"),e.dy_risk_level=t.map((function(e){return(0,n.default)((0,n.default)({},e),{},{text:e.dictValue})}))})),this.$store.dispatch("getList","YSBZ").then((function(t){console.log(t,"班组"),e.formList.dy_findTeamName=t||[];var a=t||[];"add"===e.type&&1==a.length&&(e.form.findTeamId=a[0].id,e.form.findTeamName=a[0].fullName),e.selectTeamUserList(e.form.findTeamId)})),this.$store.dispatch("getList","YWDW").then((function(t){console.log(t,"运维单位"),e.dy_YWDW=t||[],"add"===e.type&&1===t.length&&(e.form.orgName=t[0].fullName,e.form.orgId=t[0].id)})),this.$store.dispatch("getList","find_way").then((function(t){console.log(t,"发现方式"),e.formList.dy_findWay=t||[]})),this.$store.dispatch("getList","JHXQDW").then((function(t){console.log(t,"计划消缺单位"),e.formList.dy_plCleorg=t||[]})),this.$store.dispatch("getList","QXCLYJ").then((function(t){console.log(t,"缺陷处理意见"),e.dy_QXCLYJ=t||[]})))},_defclaDetail:function(){var e=this;(0,d.defclaDetail)().then((function(t){console.log(t,"部件"),e.formList.dy_defType=t.data.data.map((function(e){var t={text:e,id:e};return t}))}))},towerClick:function(e){var t=this.taskItemList.equList.findIndex((function(t){return t.id===e.id}));this.taskItemList.equList.splice(t,1)},changeTime:function(e){this.taskItemList.time=e[0]+"-"+e[1],this.taskItemList.startPlanDate=this.$u.timeFormat(new Date(e[0]),"yyyy-mm-dd hh:MM:ss"),this.taskItemList.finishPlanDate=this.$u.timeFormat(new Date(e[1]),"yyyy-mm-dd hh:MM:ss")},onChange:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.$nextTick((function(){var i={},o=l.indexOf(e);o>-1&&l.forEach((function(e,n){n<=o?i[e]=t.form[e]:a&&(t.form[e]="")})),console.log(i,"params"),(0,d.defclaDetail)(i).then((function(e){var a=e.data.data;o<l.length&&(1!==a.length||a[0]||(a=["空"]),t.formList["dy_"+l[o+1]]=a.map((function(e){var t={text:e,id:e};return t})))}))}))},save:function(e){var t=this;return new Promise((function(a){console.log(t.form,"form"),t.$refs.uForm.validate(function(){var i=(0,o.default)(regeneratorRuntime.mark((function i(o){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=2==e?"submitLoading":"saveLoading",!o){i.next=18;break}return t[n]=!0,t.form.defSource="2",t.form.defState=e,i.next=7,t.$refs.chooseImage.getIds();case 7:return t.form.defPic=i.sent,i.next=10,t.$refs.chooseAudio.getIds();case 10:return t.form.defVoi=i.sent,i.next=13,t.$refs.chooseVideo.getIds();case 13:t.form.defVid=i.sent,(0,d.defSaveOrUpdate)(t.form).then((function(){t.$refs.uToast.show({title:"".concat(1===e?"保存":2===e&&"添加","成功！")}),t[n]=!1,setTimeout((function(){t.$goBack()}),500)})),a(),i.next=20;break;case 18:t[n]=!1,console.log("验证失败");case 20:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())}))},lineChange:function(){this.form.twrCode="",this.form.twrId="",this.form.voltage="",this.form.modCode="",this.getInvtwrList()},towerChange:function(e){var t=this;console.log(e,"e");var a={line:this.form.lineId,psrId:this.form.twrId};console.log(a,"杆塔data"),(0,s.towersPMS)(a).then((function(e){console.log(e,"杆塔详情");var a=1==e.data.data.records.length?e.data.data.records[0]:[];t.form.modCode=a.modCode,t.form.voltage=a.voltageLevelName}))},classChange:function(e){console.log(e,"班组"),this.selectTeamUserList(e.id)},validateSome:function(e){var t=this;return new Promise((function(a,i){try{e.forEach((function(e){if(t.form.hasOwnProperty(e)&&!t.form[e])throw t.$refs.uToast.show({title:t.rules[e][0].message}),Error()})),a()}catch(o){return void i()}}))},generateDefReport:function(){var e=this,t=["lineName","twrCode","defType","partsKinds","defPos","defDesc"];this.validateSome(t).then((function(){var t=e.form,a=t.lineName,i=t.twrCode,o=t.defType,n=t.partsKinds,r=t.defPos,d=t.defDesc,s=t.voltage,l="".concat(s||"").concat(a).concat(i,"杆塔").concat(o).concat(n).concat(r).concat(d);console.log(l,"data简报"),e.form.defReport=l}))}}};t.default=f},eff1:function(e,t,a){"use strict";a.r(t);var i=a("edcf"),o=a.n(i);for(var n in i)"default"!==n&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=o.a}}]);