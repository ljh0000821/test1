(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-task-hiddenDanger-addDanger"],{"0f50":function(e,t,a){"use strict";var o=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a("910a")),i=o(a("3846")),n={components:{ForceForm:r.default,DendrocalamusForm:i.default},data:function(){return{id:"",type:"add",activeTabs:0,form:{},baseData:{}}},onLoad:function(e){this.id=e.id,this.activeTabs=e.activeTabs||0,this.type=e.type||"add",this.baseData=e.info?JSON.parse(decodeURIComponent(e.info||{})):{}},methods:{changTab:function(e){this.activeTabs=e}}};t.default=n},1972:function(e,t,a){"use strict";var o=a("4ea4");a("99af"),a("7db0"),a("4160"),a("d81d"),a("b680"),a("d3b7"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var r=o(a("1da1")),i=o(a("5530")),n=o(a("b35f")),d=a("9e0c"),l=a("a78e"),s=a("ec77"),f=a("f4cb"),c=a("ecc0"),m=o(a("b299")),u=o(a("6679")),p=o(a("b760")),b={props:{id:{type:String,default:""},needLoad:{type:Boolean,default:!1},type:{type:String,default:"add"},details:{type:Object,default:function(){}},baseData:{type:Object,default:function(){}}},components:{efItem:n.default,chooseImage:m.default,chooseVideo:u.default,mRecorder:p.default},mixins:[d.dictMixins],data:function(){return{submitLoading:!1,saveLoading:!1,state:0,dy_invtwrList:[],formList:{dy_XSXL:[],dy_locationL:[],dy_risk_level:[],dy_findTeamName:[],dy_SBDX:[],dy_SBDXAll:[],dy_troclaGetType:[],dy_troclaGetBasis:[],dy_listDW:[],dy_listman:[]},form:{teamName:"",teamId:"",lineName:"",twridL:"",twridT:"",modCode:"",voltage:"",lsSides:"",sbdxName:"",alineLen:0,wllen:0,mwlen:0,troType:"",troTypeId:"",troTypeLevel:"",troResName:"",sdgddw:"",sdlxr:"",findDate:"",findUserName:"",findUserid:"",troReport:""},rules:{lineName:[{required:!0,message:"请选择线路"}],twridL:[{required:!0,message:"请选择起始杆塔"}],twridT:[{required:!0,message:"请选择结束杆塔"}]}}},watch:{form:{handler:function(){this.$emit("over")},deep:!0}},created:function(){this.getTypelist(),console.log(this.needLoad,"needLoad"),this.needLoad&&this._troextDetail(),this.setBaseData(this.baseData)},mounted:function(){if(this.$refs.uForm.setRules(this.rules),"add"===this.type){this.form.findDate=(0,f.getNowTime)();var e=(0,c.getStore)("userInfo");this.form.findUserName=e.nick_name,this.form.findUserid=e.user_id,console.log(e,"usrInfo")}},computed:{melen:function(){var e=this.form,t=e.mwlen,a=e.wllen,o="";return t&&a&&(o=Math.sqrt(t*t+a*a),String(o).length>5&&(o=o.toFixed(2))),o}},methods:{setBaseData:function(e){console.log(e,"==========="),e&&e.line&&e.lineName&&(this.form.lineId=e.line,this.form.lineName=e.lineName,this.lineChange(),(e.twrId||e.id)&&(e.twrcode||e.twrCode||e.name)&&(this.form.twridL=e.twrId||e.id,this.form.townameL=e.twrcode||e.twrCode||e.name,this.towerChange()))},reload:function(){this._troextDetail()},getTypelist:function(){var e=this;"details"!=this.type&&(this.$store.dispatch("getList","YXCJ").then((function(t){var a=t||[];a.length>0&&(e.form.workId=a[0].id,e.form.workName=a[0].deptName)})),this.$store.dispatch("getList","YWDW").then((function(t){var a=t||[];a.length>0&&(e.form.orgId=a[0].id,e.form.orgName=a[0].deptName)})),this.$store.dispatch("getList","LOCATION").then((function(t){console.log(t,"大小号侧"),e.formList.dy_location=t})),this.$store.dispatch("getList","SBDX").then((function(t){console.log(t,"导线"),e.formList.dy_SBDX=t||[],e.formList.dy_SBDXAll=t||[]})),this.$store.dispatch("getList","risk_level").then((function(t){console.log(t,"风险等级"),e.formList.dy_risk_level=t.map((function(e){return(0,i.default)((0,i.default)({},e),{},{text:e.dictValue})}))})),this.$store.dispatch("getList","YSBZ").then((function(t){console.log(t,"班组"),e.formList.dy_findTeamName=t||[];var a=t||[];"add"===e.type&&1==a.length&&(e.form.teamId=a[0].id,e.form.teamName=a[0].fullName),e.selectTeamUserList(e.form.teamId)})),this.$store.dispatch("getList","listDW").then((function(t){e.formList.dy_listDW=(0,f.getList)(t)||[],console.log(t,"供电单位")})),this._troclaGetType())},lineChange:function(){this.form.townameL="",this.form.twridL="",this.form.townameT="",this.form.twridT="",this.form.voltage="",this.form.modCode="",this.getInvtwrList()},towerChange:function(e){var t=this;console.log(e,"eeee");var a={line:this.form.lineId,psrId:this.form.twridL};(0,l.towersPMS)(a).then((function(e){console.log(e,"杆塔详情");var a=1==e.data.data.records.length?e.data.data.records[0]:[];t.form.modCode=a.modCode,t.form.voltage=a.voltageLevelName}))},towerChange1:function(e){var t=this;if(this.form.twridT){var a="";this.dy_invtwrList.forEach((function(e){e.id==t.form.twridT&&(a=e.twrSort)})),e.twrSort>a&&(this.$refs.uToast.show({title:"起始杆塔不能大于结束杆塔"}),this.form.townameT="",this.form.twridT="")}},towerChange2:function(e){var t=this,a="";this.dy_invtwrList.forEach((function(e){e.id==t.form.twridL&&(a=e.twrSort)})),console.log(e,"etwrSort"),e.twrSort<a&&(this.$refs.uToast.show({title:"结束杆塔不能小于起始杆塔"}),this.form.townameT="",this.form.twridT="")},_troclaGetType:function(){var e=this;(0,s.troclaGetType)({type:"1"}).then((function(t){console.log(t,"隐患分类");var a=t.data.data;1!==a.length||a[0]||(a=["空"]),e.formList.dy_troclaGetType=a.map((function(e){var t={text:e,id:e};return t}))}))},_troclaGetBasis:function(e){var t=this,a={troType:e};(0,s.troclaGetBasis)(a).then((function(e){console.log(e,"隐患分类依据和分级"),t.formList.dy_troclaGetBasis=e.data.data}))},typeChange:function(e){console.log(e,"data"),this.formList.dy_troclaGetBasis=[],this.form.troTypeBasis="",this.form.troTypeId="",this.form.troTypeLevel="",this._troclaGetBasis(e.text)},troTypeIdChange:function(e){console.log(e,"edata"),this.form.troTypeLevel=e.troTypeLevel},_depleaderListman:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a={dwName:t};(0,s.depleaderListman)(a).then((function(t){console.log(t,"单位联系人"),e.formList.dy_listman=(0,f.getList)(t.data.data)}))},sdgddwChange:function(e){console.log(e,"data"),this.form.sdlxr="",this._depleaderListman(e.text)},classChange:function(e){console.log(e,"班组"),this.selectTeamUserList(e.id)},validateSome:function(e){var t=this;return new Promise((function(a,o){try{e.forEach((function(e){if(t.form.hasOwnProperty(e)&&!t.form[e])throw t.$refs.uToast.show({title:"请完善相关数据"}),Error()})),a()}catch(r){return void o()}}))},save:function(e){var t=this;this.$refs.uForm.validate(function(){var a=(0,r.default)(regeneratorRuntime.mark((function a(o){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!o){a.next=17;break}return r=2==e?"submitLoading":"saveLoading",t[r]=!0,t.form.state=e,a.next=6,t.$refs.chooseImage.getIds();case 6:return t.form.troPic=a.sent,a.next=9,t.$refs.chooseVideo.getIds();case 9:return t.form.troVid=a.sent,a.next=12,t.$refs.chooseAudio.getIds();case 12:t.form.troVoi=a.sent,console.log(t.form,"this.form"),(0,s.troextSubmit)(t.form).then((function(){t.$refs.uToast.show({title:"".concat(1===e?"保存":2===e&&"添加","成功！")}),t[r]=!1,setTimeout((function(){uni.navigateTo({url:"pages/task/hiddenDanger/index"})}),500)})).catch((function(){t[r]=!1})),a.next=18;break;case 17:console.log("验证失败");case 18:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},_troextDetail:function(){var e=this;this.id&&(0,s.troextDetail)({id:this.id}).then((function(t){e.form=t.data.data,e.state=e.form.state,console.log(t,"onshow详情"),e.$emit("loadend",t.data.data),e.getInvtwrList(),e._troclaGetBasis(e.form.troType),e._depleaderListman(e.form.sdgddw)}))},toExamine:function(){uni.navigateTo({url:"pages/task/hiddenDanger/examine?id="+this.id+"&stateObj=ccsh&type=0"})},toHandle:function(){console.log("teamId"),uni.navigateTo({url:"pages/task/hiddenDanger/handle?id="+this.id+"&tag=0&teamId="+this.form.teamId})},toTour:function(){uni.navigateTo({url:"pages/task/hiddenDanger/specialTour?id="+this.id+"&teamId="+this.form.teamId+"&teamName="+this.form.teamName+"&type=0"})},generateDefReport:function(){var e=this,t=["lsSides","alineLen","wllen","mwlen","lineName","townameL","townameT"];this.validateSome(t).then((function(){var t=e.form,a=t.lsSides,o=t.sbdxName,r=t.alineLen,i=t.wllen,n=t.mwlen,d=t.troBody,l=t.troResName,s=t.lineName,f=t.townameL,c=t.townameT,m=e.formList.dy_location.find((function(e){return String(e.dictKey)==a})),u="".concat(s).concat(f,"-").concat(c).concat(m.dictValue||"").concat(o||"","顺线路约").concat(r,"米，水平距离").concat(i,"米，垂直距离").concat(n,"米，").concat(d||"","，负责人：").concat(l||"未填写");console.log(u,"data简报"),e.form.troReport=u}))}}};t.default=b},"20be":function(e,t,a){"use strict";var o=a("4ea4");a("4160"),a("d81d"),a("b680"),a("d3b7"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var r=o(a("1da1")),i=o(a("5530")),n=o(a("2909")),d=o(a("b35f")),l=a("9e0c"),s=a("a78e"),f=a("ec77"),c=a("f4cb"),m=a("ecc0"),u=o(a("b299")),p=o(a("6679")),b={props:{id:{type:String,default:""},needLoad:{type:Boolean,default:!1},type:{type:String,default:"add"},details:{type:Object,default:function(){}},baseData:{type:Object,default:function(){}}},components:{efItem:d.default,chooseImage:u.default,chooseVideo:p.default},mixins:[l.dictMixins],data:function(){return{unit:"数量",submitLoading:!1,saveLoading:!1,state:0,dy_invtwrList:[],formList:{dy_XSXL:[],dy_locationL:[],dy_risk_level:[],dy_findTeamName:[],dy_troclaGetType:[],dy_troclaGetBasis:[],treeData:[]},form:{teamId:"",lineName:"",twridL:"",modCode:"",voltage:"",lsSides:"",alineLen:0,wllen:0,mwlen:0,fstPlt:"",treeType:"",treeNum:"",troType:"",troTypeId:"",troTypeLevel:"",findDate:"",findUserName:"",findUserId:""},rules:{lineName:[{required:!0,message:"请选择线路"}],twridL:[{required:!0,message:"请选择杆塔"}]}}},watch:{form:{handler:function(){this.$emit("over")},deep:!0}},created:function(){this.getTypelist(),this.needLoad&&this._trotreeDetail(),this.setBaseData(this.baseData)},mounted:function(){if(this.$refs.uForm.setRules(this.rules),"add"===this.type){this.form.findDate=(0,c.getNowTime)();var e=(0,m.getStore)("userInfo");this.form.findUserName=e.nick_name,this.form.findUserId=e.user_id,console.log(e,"usrInfo")}},computed:{melen:function(){var e=this.form,t=e.mwlen,a=e.wllen,o="";return t&&a&&(o=Math.sqrt(t*t+a*a),String(o).length>5&&(o=o.toFixed(2))),o}},methods:{setBaseData:function(e){e.line&&e.lineName&&(this.form.lineId=e.line,this.form.lineName=e.lineName,this.lineChange(),(e.twrId||e.id)&&(e.twrcode||e.twrCode||e.name)&&(this.form.twridL=e.twrId||e.id,this.form.townameL=e.twrcode||e.twrCode||e.name,this.towerChange()))},reload:function(){this._trotreeDetail()},getTypelist:function(){var e=this;"details"!=this.type&&(this.$store.dispatch("getList","YXCJ").then((function(t){var a=t||[];a.length>0&&(e.form.workId=a[0].id,e.form.workName=a[0].deptName)})),this.$store.dispatch("getList","YWDW").then((function(t){var a=t||[];a.length>0&&(e.form.orgId=a[0].id,e.form.orgName=a[0].deptName)})),this.$store.dispatch("getList","basetreeList").then((function(t){console.log(t,"树种res");var a=(0,c.groupArr)(t.records,"fstPlt","id");a=a.map((function(e){return e.secPlt=e.fstPlt,e})),console.log(a,"树种"),e.formList.dy_basetreeList=a||[],a.forEach((function(t){var a;(a=e.formList.treeData).push.apply(a,(0,n.default)(t.data))}))})),this.$store.dispatch("getList","LOCATION").then((function(t){console.log(t,"大小号侧"),e.formList.dy_location=t})),this.$store.dispatch("getList","risk_level").then((function(t){console.log(t,"风险等级"),e.formList.dy_risk_level=t.map((function(e){return(0,i.default)((0,i.default)({},e),{},{text:e.dictValue})}))})),this.$store.dispatch("getList","YSBZ").then((function(t){console.log(t,"班组"),e.formList.dy_findTeamName=t||[];var a=t||[];"add"===e.type&&1==a.length&&(console.log(e.type,"type"),e.form.teamId=a[0].id,e.form.teamName=a[0].fullName),e.selectTeamUserList(e.form.teamId)})),this._troclaGetType())},lineChange:function(){this.form.townameL="",this.form.twridL="",this.form.townameT="",this.form.twridT="",this.form.voltage="",this.form.modCode="",this.getInvtwrList()},towerChange:function(){var e=this,t={line:this.form.lineId,psrId:this.form.twridL};(0,s.towersPMS)(t).then((function(t){console.log(t,"杆塔详情");var a=1==t.data.data.records.length?t.data.data.records[0]:[];e.form.modCode=a.modCode,e.form.voltage=a.voltageLevelName}))},towerChange2:function(e){var t=this;console.log(this.form.twridL,"twridL"),console.log(this.dy_invtwrList,"dy_invtwrList");var a="";this.dy_invtwrList.forEach((function(e){e.id==t.form.twridL&&(a=e.twrSort)})),console.log(a,"sortL"),console.log(e.twrSort,"etwrSort"),e.twrSort<a&&(this.$refs.uToast.show({title:"结束杆塔不能小于起始杆塔"}),this.form.townameT="",this.form.twridT="")},treeChange:function(e){console.log(e,"树的data"),e.length},_troclaGetType:function(){var e=this;(0,f.troclaGetType)({type:"2"}).then((function(t){console.log(t,"隐患分类");var a=t.data.data;1!==a.length||a[0]||(a=["空"]),e.formList.dy_troclaGetType=a.map((function(e){var t={text:e,id:e};return t}))}))},_troclaGetBasis:function(e){var t=this,a={troType:e};(0,f.troclaGetBasis)(a).then((function(e){console.log(e,"隐患分类依据和分级"),t.formList.dy_troclaGetBasis=e.data.data}))},typeChange:function(e){console.log(e,"data"),this.formList.dy_troclaGetBasis=[],this.form.troTypeBasis="",this.form.troTypeId="",this.form.troTypeLevel="",this._troclaGetBasis(e.text)},classChange:function(e){console.log(e,"班组"),this.selectTeamUserList(e.id)},troTypeIdChange:function(e){console.log(e,"edata"),this.form.troTypeLevel=e.troTypeLevel},validateSome:function(e){var t=this;return new Promise((function(a,o){try{e.forEach((function(e){if(t.form.hasOwnProperty(e)&&!t.form[e])throw t.$refs.uToast.show({title:t.rules[e][0].message}),Error()})),a()}catch(r){return void o()}}))},save:function(e){var t=this;this.$refs.uForm.validate(function(){var a=(0,r.default)(regeneratorRuntime.mark((function a(o){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!o){a.next=16;break}return r=2==e?"submitLoading":"saveLoading",t[r]=!0,t.form.state=e,a.next=6,t.$refs.chooseImage.getIds();case 6:return t.form.troPic=a.sent,a.next=9,t.$refs.chooseVideo.getIds();case 9:return t.form.troVid=a.sent,a.next=12,t.$refs.chooseAudio.getIds();case 12:t.form.troVoi=a.sent,(0,f.trotreeSubmit)(t.form).then((function(){t.$refs.uToast.show({title:"".concat(1===e?"保存":2===e&&"添加","成功！")}),t[r]=!1,setTimeout((function(){uni.navigateTo({url:"pages/task/hiddenDanger/index?active=1"})}),500)})).catch((function(){t[r]=!1})),a.next=17;break;case 16:console.log("验证失败");case 17:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},_trotreeDetail:function(){var e=this;this.id&&(0,f.trotreeDetail)({id:this.id}).then((function(t){console.log(t,"onshow详情"),e.form=t.data.data,e.state=e.form.state,e.$emit("loadend",t.data.data),e.getInvtwrList(),e._troclaGetBasis(e.form.troType)}))},toExamine:function(){uni.navigateTo({url:"pages/task/hiddenDanger/examine?id="+this.id+"&stateObj=ccsh&type=1"})},toHandle:function(){uni.navigateTo({url:"pages/task/hiddenDanger/handle?id="+this.id+"&tag=1&teamId="+this.form.teamId})},toTour:function(){uni.navigateTo({url:"pages/task/hiddenDanger/specialTour?id="+this.id+"&teamId="+this.form.teamId+"&teamName="+this.form.teamName+"&type=1"})},fstPltChange:function(e){var t=this;console.log(e,"树种分类变化"),this.formList.treeData=[],e.forEach((function(e){var a;(a=t.formList.treeData).push.apply(a,(0,n.default)(e.data))})),console.log(this.formList.treeData,"this.formList.treeData")}}};t.default=b},"20e5":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return o}));var o={uForm:a("586b").default,uFormItem:a("e2f4").default,uButton:a("147a").default,uToast:a("4463").default},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("u-form",{ref:"uForm",attrs:{model:e.form,"error-type":["toast"]}},[a("u-form-item",{attrs:{label:"运维班组","label-width":"150",prop:"teamId"}},[a("efItem",{attrs:{data:e.formList.dy_findTeamName,modelId:e.form.teamId,type:"add"==e.type||"edit"==e.type?"select":"label",name:"fullName",id:"id"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"teamId",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"teamId",t)},change:function(t){arguments[0]=t=e.$handleEvent(t),e.classChange.apply(void 0,arguments)}},model:{value:e.form.teamName,callback:function(t){e.$set(e.form,"teamName",t)},expression:"form.teamName"}})],1),a("u-form-item",{attrs:{label:"线路名称","label-width":"150",prop:"lineName"}},[a("efItem",{attrs:{data:e.formList.dy_XSXL,type:"add"==e.type||"edit"==e.type?"lines":"label",modelId:e.form.lineId},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.lineChange.apply(void 0,arguments)},"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"lineId",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"lineId",t)}},model:{value:e.form.lineName,callback:function(t){e.$set(e.form,"lineName",t)},expression:"form.lineName"}})],1),a("u-form-item",{attrs:{label:"杆塔号","label-width":"150",prop:"twridL"}},[a("efItem",{attrs:{data:e.dy_invtwrList,require:e.form.lineName,errMessage:"请先选择线路",modelId:e.form.twridL,type:"add"==e.type||"edit"==e.type?"towers":"label",name:"twrCode",id:"id"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"twridL",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"twridL",t)},input:function(t){arguments[0]=t=e.$handleEvent(t),function(t){return e.towerChange(t)}.apply(void 0,arguments)}},model:{value:e.form.townameL,callback:function(t){e.$set(e.form,"townameL",t)},expression:"form.townameL"}})],1),a("u-form-item",{attrs:{label:"电压等级","label-width":"150",prop:"voltage"}},[a("efItem",{attrs:{isRightIcon:!1,placeholder:""},model:{value:e.form.voltage,callback:function(t){e.$set(e.form,"voltage",t)},expression:"form.voltage"}})],1),a("u-form-item",{attrs:{prop:"location",label:"大小号侧","label-width":"150"}},[a("efItem",{attrs:{data:e.formList.dy_location,modelId:e.form.lsSides,type:"add"==e.type||"edit"==e.type?"select":"label",name:"dictValue",id:"dictKey"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"lsSides",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"lsSides",t)}},model:{value:e.form.lsSidesName,callback:function(t){e.$set(e.form,"lsSidesName",t)},expression:"form.lsSidesName"}})],1),a("u-form-item",{attrs:{prop:"alineLen",label:"顺线路距离（m）","label-width":"240"}},[a("efItem",{attrs:{type:"add"==e.type||"edit"==e.type?"number":"label",placeholder:"请输入",isRightIcon:!1},model:{value:e.form.alineLen,callback:function(t){e.$set(e.form,"alineLen",t)},expression:"form.alineLen"}})],1),a("u-form-item",{attrs:{prop:"wllen",label:"水平距离（m）","label-width":"240"}},[a("efItem",{attrs:{type:"add"==e.type||"edit"==e.type?"number":"label",placeholder:"请输入",isRightIcon:!1},model:{value:e.form.wllen,callback:function(t){e.$set(e.form,"wllen",t)},expression:"form.wllen"}})],1),a("u-form-item",{attrs:{prop:"mwlen",label:"垂直距离（m）","label-width":"240"}},[a("efItem",{attrs:{type:"add"==e.type||"edit"==e.type?"number":"label",placeholder:"请输入",isRightIcon:!1},model:{value:e.form.mwlen,callback:function(t){e.$set(e.form,"mwlen",t)},expression:"form.mwlen"}})],1),a("u-form-item",{attrs:{label:"净空距离（m）","label-width":"240"}},[a("v-uni-view",{staticClass:"flex1 flex-end"},[e._v(e._s(e.melen))])],1),a("u-form-item",{attrs:{prop:"fstPlt",label:"树种分类","label-width":"240"}},[a("efItem",{attrs:{data:e.formList.dy_basetreeList,multiple:!0,type:"add"==e.type||"edit"==e.type?"select":"label",name:"secPlt",id:"id",childName:"data"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.fstPltChange.apply(void 0,arguments)}},model:{value:e.form.fstPlt,callback:function(t){e.$set(e.form,"fstPlt",t)},expression:"form.fstPlt"}})],1),a("u-form-item",{attrs:{prop:"troBody",label:"树种","label-width":"240"}},[a("efItem",{attrs:{data:e.formList.treeData,multiple:!0,type:"add"==e.type||"edit"==e.type?"select":"label",name:"secPlt",id:"id",childName:"data"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.treeChange.apply(void 0,arguments)}},model:{value:e.form.treeType,callback:function(t){e.$set(e.form,"treeType",t)},expression:"form.treeType"}})],1),a("u-form-item",{attrs:{prop:"troBody",label:e.unit,"label-width":"240"}},[a("efItem",{attrs:{type:"add"==e.type||"edit"==e.type?"number":"label",placeholder:"请输入",isRightIcon:!1},model:{value:e.form.treeNum,callback:function(t){e.$set(e.form,"treeNum",t)},expression:"form.treeNum"}})],1),a("u-form-item",{attrs:{label:"隐患分类","label-width":"150",prop:"troType"}},[a("efItem",{attrs:{data:e.formList.dy_troclaGetType,type:"add"==e.type||"edit"==e.type?"select":"label",name:"text",id:"id"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.typeChange.apply(void 0,arguments)}},model:{value:e.form.troType,callback:function(t){e.$set(e.form,"troType",t)},expression:"form.troType"}})],1),a("u-form-item",{attrs:{label:"分类依据","label-width":"150",prop:"troTypeId"}},[a("efItem",{attrs:{data:e.formList.dy_troclaGetBasis,require:e.form.troType,errMessage:"请先选择隐患分类",modelId:e.form.troTypeId,type:"add"==e.type||"edit"==e.type?"select":"label",name:"troTypeBasis",id:"id"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"troTypeId",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"troTypeId",t)},change:function(t){arguments[0]=t=e.$handleEvent(t),e.troTypeIdChange.apply(void 0,arguments)}},model:{value:e.form.troTypeBasis,callback:function(t){e.$set(e.form,"troTypeBasis",t)},expression:"form.troTypeBasis"}})],1),a("u-form-item",{attrs:{label:"隐患分级","label-width":"150",prop:"troTypeLevel"}},[a("efItem",{attrs:{isRightIcon:!1,placeholder:""},model:{value:e.form.troTypeLevel,callback:function(t){e.$set(e.form,"troTypeLevel",t)},expression:"form.troTypeLevel"}})],1),a("u-form-item",{attrs:{prop:"findDate",label:"发现时间","label-width":"150"}},[a("efItem",{attrs:{endTime:e.$store.state.nowDate,type:"add"==e.type||"edit"==e.type?"time":"label"},model:{value:e.form.findDate,callback:function(t){e.$set(e.form,"findDate",t)},expression:"form.findDate"}})],1),a("u-form-item",{attrs:{prop:"findUserName",label:"发现人员","label-width":"150"}},[a("efItem",{attrs:{data:e.dy_teamUserList,modelId:e.form.findUserId,type:"add"==e.type||"edit"==e.type?"people":"label"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"findUserId",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"findUserId",t)}},model:{value:e.form.findUserName,callback:function(t){e.$set(e.form,"findUserName",t)},expression:"form.findUserName"}})],1),a("u-form-item",{attrs:{prop:"troPics",label:"拍照","label-width":"150","label-position":"top"}},[a("chooseImage",{ref:"chooseImage",attrs:{images:e.form.troPics,type:e.type,picType:"3"}})],1),a("u-form-item",{attrs:{prop:"defPicROList",label:"录音","label-width":"150","label-position":"top"}},[a("chooseAudio",{ref:"chooseAudio",attrs:{audioList:e.form.troVois,type:e.type,picType:"3"}})],1),a("u-form-item",{attrs:{prop:"troVids",label:"视频","label-width":"150","label-position":"top"}},[a("chooseVideo",{ref:"chooseVideo",attrs:{videoList:e.form.troVids,type:e.type,picType:"3"}})],1)],1),"add"===e.type||"edit"===e.type?a("u-button",{directives:[{name:"permission",rawName:"v-permission",value:["user","teamLeader","zhuanze"],expression:"['user','teamLeader','zhuanze']"}],staticClass:"btn custom-style",attrs:{type:"primary",shape:"circle",ripple:!0,loading:e.submitLoading},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save(2)}}},[e._v("提交")]):e._e(),"add"===e.type||"edit"===e.type?a("u-button",{directives:[{name:"permission",rawName:"v-permission",value:["user","teamLeader","zhuanze"],expression:"['user','teamLeader','zhuanze']"}],staticClass:"btn btn-plain",attrs:{shape:"circle",ripple:!0,plain:!0,loading:e.saveLoading},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save(1)}}},[e._v("保存")]):e._e(),["2"].includes(e.state)?a("u-button",{directives:[{name:"permission",rawName:"v-permission",value:"teamLeader",expression:"'teamLeader'"}],staticClass:"btn custom-style",attrs:{type:"primary",shape:"circle",ripple:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toExamine()}}},[e._v("审核")]):e._e(),["3"].includes(e.state)?a("v-uni-view",{staticClass:"flex-around"},[a("u-button",{staticClass:"btn btn-plain",attrs:{shape:"circle",ripple:!0,plain:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toHandle.apply(void 0,arguments)}}},[e._v("处理")]),a("u-button",{staticClass:"btn custom-style",attrs:{type:"primary",shape:"circle",ripple:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toTour.apply(void 0,arguments)}}},[e._v("维护")])],1):e._e(),a("u-toast",{ref:"uToast"})],1)},i=[]},"22eb":function(e,t,a){var o=a("9501");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var r=a("4f06").default;r("0c2193f8",o,!0,{sourceMap:!1,shadowMode:!1})},3846:function(e,t,a){"use strict";a.r(t);var o=a("20e5"),r=a("4087");for(var i in r)"default"!==i&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a("9b2a");var n,d=a("f0c5"),l=Object(d["a"])(r["default"],o["b"],o["c"],!1,null,"1fad9279",null,!1,o["a"],n);t["default"]=l.exports},4087:function(e,t,a){"use strict";a.r(t);var o=a("20be"),r=a.n(o);for(var i in o)"default"!==i&&function(e){a.d(t,e,(function(){return o[e]}))}(i);t["default"]=r.a},"571a":function(e,t,a){var o=a("24fb");t=o(!1),t.push([e.i,".btn[data-v-25ec0090]{padding:0 %?36?%;-webkit-border-radius:%?40?%;border-radius:%?40?%;border:1px solid #000;text-align:center}.btn-active[data-v-25ec0090]{border:none;color:#fff;background-color:#05b2cc}",""]),e.exports=t},"625e":function(e,t,a){"use strict";a.r(t);var o=a("1972"),r=a.n(o);for(var i in o)"default"!==i&&function(e){a.d(t,e,(function(){return o[e]}))}(i);t["default"]=r.a},"6e7b":function(e,t,a){"use strict";var o=a("22eb"),r=a.n(o);r.a},"910a":function(e,t,a){"use strict";a.r(t);var o=a("bb50"),r=a("625e");for(var i in r)"default"!==i&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a("6e7b");var n,d=a("f0c5"),l=Object(d["a"])(r["default"],o["b"],o["c"],!1,null,"1c86ed4b",null,!1,o["a"],n);t["default"]=l.exports},9501:function(e,t,a){var o=a("24fb");t=o(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */\r\n/*每个页面公共css */uni-page-body[data-v-1c86ed4b]{background-color:#dde4f2;font-family:PingFangSC-Medium,PingFang SC}.flex-center[data-v-1c86ed4b]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-around[data-v-1c86ed4b]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-around;justify-content:space-around;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-between[data-v-1c86ed4b]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-start[data-v-1c86ed4b]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-end[data-v-1c86ed4b]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-column[data-v-1c86ed4b]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.flex-wrap[data-v-1c86ed4b]{-webkit-flex-wrap:wrap;flex-wrap:wrap}.flex[data-v-1c86ed4b]{display:-webkit-box;display:-webkit-flex;display:flex}.flex1[data-v-1c86ed4b]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.align-center[data-v-1c86ed4b]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.text-center[data-v-1c86ed4b]{text-align:center}.m-8[data-v-1c86ed4b]{margin:%?8?%}.m-16[data-v-1c86ed4b]{margin:%?16?%}.p-8[data-v-1c86ed4b]{padding:%?8?%}.p-16[data-v-1c86ed4b]{padding:%?16?%}.m-t-16[data-v-1c86ed4b]{margin-top:%?16?%}.m-t-8[data-v-1c86ed4b]{margin-top:%?8?%}.m-t-24[data-v-1c86ed4b]{margin-top:%?24?%}.m-t-32[data-v-1c86ed4b]{margin-top:%?32?%}.m-t-40[data-v-1c86ed4b]{margin-top:%?40?%}.m-l-16[data-v-1c86ed4b]{margin-left:%?16?%}.m-l-24[data-v-1c86ed4b]{margin-left:%?24?%}.m-l-32[data-v-1c86ed4b]{margin-left:%?32?%}.m-l-40[data-v-1c86ed4b]{margin-left:%?40?%}.m-l-8[data-v-1c86ed4b]{margin-left:%?8?%}.m-r-8[data-v-1c86ed4b]{margin-right:%?8?%}.m-r-16[data-v-1c86ed4b]{margin-right:%?16?%}.m-r-24[data-v-1c86ed4b]{margin-right:%?24?%}.m-b-16[data-v-1c86ed4b]{margin-bottom:%?16?%}.m-b-32[data-v-1c86ed4b]{margin-bottom:%?32?%}.p-l-8[data-v-1c86ed4b]{padding-left:%?8?%}.p-l-16[data-v-1c86ed4b]{padding-left:%?16?%}.p-b-24[data-v-1c86ed4b]{padding-bottom:%?24?%}.p-b-32[data-v-1c86ed4b]{padding-bottom:%?32?%}.p-b-48[data-v-1c86ed4b]{padding-bottom:%?48?%}.text-ellipsis[data-v-1c86ed4b]{width:0;overflow:hidden;\r\n  /*超出部分隐藏*/white-space:nowrap;\r\n  /*不换行*/text-overflow:ellipsis\r\n  /*超出部分文字以...显示*/}.container[data-v-1c86ed4b]{margin:0 %?16?%;background:#fff;-webkit-box-shadow:0 %?4?% %?16?% 0 rgba(14,23,37,.08);box-shadow:0 %?4?% %?16?% 0 rgba(14,23,37,.08);-webkit-border-radius:%?24?%;border-radius:%?24?%;padding:%?15?% %?40?%;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden}.ef-btn[data-v-1c86ed4b]{width:%?200?%;height:%?60?%!important;-webkit-box-shadow:0 %?4?% %?16?% 0 rgba(14,23,37,.08);box-shadow:0 %?4?% %?16?% 0 rgba(14,23,37,.08);-webkit-border-radius:%?30?%;border-radius:%?30?%;margin-top:%?50?%;background-color:#05b2cc!important;font-size:%?24?%!important}.bg-orange[data-v-1c86ed4b]{background-color:#f7b500}.bg-blue[data-v-1c86ed4b]{background-color:#05b2cc}.bg-green[data-v-1c86ed4b]{background-color:#00be27}.base-green-text[data-v-1c86ed4b]{color:#05b2cc}.gray-text[data-v-1c86ed4b]{color:#97a4ae}.green-text[data-v-1c86ed4b]{color:#05b2cc}.red-text[data-v-1c86ed4b]{color:red}.orange-text[data-v-1c86ed4b]{color:orange}.border-b-gray[data-v-1c86ed4b]{padding-bottom:%?16?%;border-bottom:1px solid #dde4f2}.title-icon[data-v-1c86ed4b]{height:%?32?%}.ef-btn-normal[data-v-1c86ed4b]{width:%?200?%;height:%?60?%!important;margin:%?20?% auto}.btn-primary[data-v-1c86ed4b]{background-color:#05b2cc!important;color:#fff!important}.btn-normal[data-v-1c86ed4b]{color:#05b2cc!important}.my-video[data-v-1c86ed4b]{position:fixed;top:0;left:0;bottom:0;right:0;height:100%;width:100%;background-color:rgba(0,0,0,.5);z-index:3000}.f-s-24[data-v-1c86ed4b]{font-size:%?24?%}.btn[data-v-1c86ed4b]{width:%?200?%;height:%?60?%!important;margin-top:%?24?%}.btn-plain[data-v-1c86ed4b]{border-color:#05b2cc;color:#05b2cc}.custom-style[data-v-1c86ed4b]{background-color:#05b2cc!important;color:#fff}body.?%PAGE?%[data-v-1c86ed4b]{background-color:#dde4f2}',""]),e.exports=t},"9b2a":function(e,t,a){"use strict";var o=a("f2b4"),r=a.n(o);r.a},"9d45":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return o}));var o={customNavbar:a("384b").default,uForm:a("586b").default,uFormItem:a("e2f4").default},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("custom-navbar",{attrs:{title:"添加隐患",iconLeft:!0}}),a("v-uni-view",{staticClass:"container"},["add"===e.type?[a("u-form",{attrs:{model:e.form}},[a("u-form-item",{attrs:{label:"类型","label-width":"150",prop:"lineName","label-position":"top"}},[a("v-uni-view",{staticClass:"flex"},[a("v-uni-view",{class:["btn",{"btn-active":0===e.activeTabs}],on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changTab(0)}}},[e._v("外力隐患")]),a("v-uni-view",{class:["btn","m-l-16",{"btn-active":1===e.activeTabs}],on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changTab(1)}}},[e._v("树竹隐患")])],1)],1)],1)]:e._e(),0==e.activeTabs?[a("ForceForm",{ref:"ForceForm",attrs:{type:e.type,id:e.id,needLoad:"edit"==e.type,baseData:e.baseData}})]:e._e(),1==e.activeTabs?[a("DendrocalamusForm",{ref:"DendrocalamusForm",attrs:{type:e.type,id:e.id,needLoad:"edit"==e.type,baseData:e.baseData}})]:e._e()],2)],1)},i=[]},"9e0c":function(e,t,a){"use strict";a("d3b7"),Object.defineProperty(t,"__esModule",{value:!0}),t.dictMixins=void 0;var o=a("2e12"),r=a("a78e"),i={data:function(){return{dy_teamUserList:[],dy_invtwrList:[]}},methods:{selectTeamUserList:function(e){var t=this;(0,o.selectTeamUserList)({deptId:e||this.form.teamId}).then((function(e){var a=e.data;t.dy_teamUserList=a.data.records||[]}))},getInvtwrList:function(){var e=this;return new Promise((function(t,a){(0,r.towersPMS)({line:e.form.lineId||""}).then((function(a){var o=a.data;console.log(o,"杆塔data===="),e.dy_invtwrList=o.data.records||[],t(o.data.records)})).catch((function(){a()}))}))}}};t.dictMixins=i},a78e:function(e,t,a){"use strict";var o=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.twrsetSubmit=t.invtwrDetail=t.towersPMS=t.invtwrList=void 0;var r=o(a("5530")),i=o(a("5f30")),n=function(e){return(0,i.default)({url:"/blade-sd/invtwr/listAllByLineID",method:"GET",data:e})};t.invtwrList=n;var d=function(e){return(0,i.default)({url:"/blade-sd/api/towers",method:"GET",data:(0,r.default)({current:1,size:999999},e)})};t.towersPMS=d;var l=function(e){return(0,i.default)({url:"/blade-sd/invtwr/detail",method:"get",data:e})};t.invtwrDetail=l;var s=function(e){return(0,i.default)({url:"/blade-sd/twrset/submit",method:"post",data:e})};t.twrsetSubmit=s},bb50:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return o}));var o={uForm:a("586b").default,uFormItem:a("e2f4").default,uButton:a("147a").default,uInput:a("87aa").default,uToast:a("4463").default},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("u-form",{ref:"uForm",attrs:{model:e.form,"error-type":["toast"]}},[a("u-form-item",{attrs:{label:"运维班组","label-width":"150",prop:"teamId"}},[a("efItem",{attrs:{data:e.formList.dy_findTeamName,modelId:e.form.teamId,type:"add"===e.type||"edit"===e.type?"select":"label",name:"fullName",id:"id"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"teamId",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"teamId",t)},change:function(t){arguments[0]=t=e.$handleEvent(t),e.classChange.apply(void 0,arguments)}},model:{value:e.form.teamName,callback:function(t){e.$set(e.form,"teamName",t)},expression:"form.teamName"}})],1),a("u-form-item",{attrs:{label:"线路名称","label-width":"150",prop:"lineName"}},[a("efItem",{attrs:{data:e.formList.dy_XSXL,type:"add"===e.type||"edit"===e.type?"lines":"label",modelId:e.form.lineId},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.lineChange.apply(void 0,arguments)},"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"lineId",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"lineId",t)}},model:{value:e.form.lineName,callback:function(t){e.$set(e.form,"lineName",t)},expression:"form.lineName"}})],1),a("u-form-item",{attrs:{label:"起始杆塔","label-width":"150",prop:"twridL"}},[a("efItem",{attrs:{data:e.dy_invtwrList,require:e.form.lineName,errMessage:"请先选择线路",modelId:e.form.twridL,type:"add"===e.type||"edit"===e.type?"towers":"label",name:"twrCode",id:"id"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"twridL",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"twridL",t)},input:function(t){arguments[0]=t=e.$handleEvent(t),function(t){return e.towerChange(t)}.apply(void 0,arguments)},change:function(t){arguments[0]=t=e.$handleEvent(t),e.towerChange1.apply(void 0,arguments)}},model:{value:e.form.townameL,callback:function(t){e.$set(e.form,"townameL",t)},expression:"form.townameL"}})],1),a("u-form-item",{attrs:{label:"结束杆塔","label-width":"150",prop:"twridT"}},[a("efItem",{attrs:{data:e.dy_invtwrList,require:e.form.twridL,errMessage:"请先选择起始杆塔",modelId:e.form.twridT,type:"add"===e.type||"edit"===e.type?"towers":"label",name:"twrCode",id:"id"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"twridT",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"twridT",t)},change:function(t){arguments[0]=t=e.$handleEvent(t),e.towerChange2.apply(void 0,arguments)}},model:{value:e.form.townameT,callback:function(t){e.$set(e.form,"townameT",t)},expression:"form.townameT"}})],1),a("u-form-item",{attrs:{label:"电压等级","label-width":"150",prop:"voltage"}},[a("efItem",{attrs:{isRightIcon:!1,placeholder:""},model:{value:e.form.voltage,callback:function(t){e.$set(e.form,"voltage",t)},expression:"form.voltage"}})],1),a("u-form-item",{attrs:{prop:"location",label:"大小号侧","label-width":"150"}},[a("efItem",{attrs:{data:e.formList.dy_location,modelId:e.form.lsSides,type:"add"===e.type||"edit"===e.type?"select":"label",name:"dictValue",id:"dictKey"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"lsSides",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"lsSides",t)}},model:{value:e.form.lsSidesName,callback:function(t){e.$set(e.form,"lsSidesName",t)},expression:"form.lsSidesName"}})],1),a("u-form-item",{attrs:{prop:"sbdxName",label:"导线","label-width":"150"}},[a("efItem",{attrs:{data:e.formList.dy_SBDX,require:e.form.twridT,errMessage:"请先选择杆塔",modelId:e.form.equWirId,type:"add"===e.type||"edit"===e.type?"select":"label",name:"dictValue",id:"dictKey"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"equWirId",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"equWirId",t)}},model:{value:e.form.sbdxName,callback:function(t){e.$set(e.form,"sbdxName",t)},expression:"form.sbdxName"}})],1),a("u-form-item",{attrs:{prop:"alineLen",label:"顺线路距离（m）","label-width":"240"}},[a("efItem",{attrs:{type:"add"==e.type||"edit"==e.type?"number":"label",placeholder:"请输入",isRightIcon:!1},model:{value:e.form.alineLen,callback:function(t){e.$set(e.form,"alineLen",t)},expression:"form.alineLen"}})],1),a("u-form-item",{attrs:{prop:"wllen",label:"水平距离（m）","label-width":"240"}},[a("efItem",{attrs:{type:"add"==e.type||"edit"==e.type?"number":"label",placeholder:"请输入",isRightIcon:!1},model:{value:e.form.wllen,callback:function(t){e.$set(e.form,"wllen",t)},expression:"form.wllen"}})],1),a("u-form-item",{attrs:{prop:"mwlen",label:"垂直距离（m）","label-width":"240"}},[a("efItem",{attrs:{type:"add"==e.type||"edit"==e.type?"number":"label",placeholder:"请输入",isRightIcon:!1},model:{value:e.form.mwlen,callback:function(t){e.$set(e.form,"mwlen",t)},expression:"form.mwlen"}})],1),a("u-form-item",{attrs:{label:"净空距离（m）","label-width":"240"}},[a("v-uni-view",{staticClass:"flex1 flex-end"},[e._v(e._s(e.melen))])],1),a("u-form-item",{attrs:{prop:"troBody",label:"隐患物","label-width":"240"}},[a("efItem",{attrs:{title:"隐患物",isRightIcon:!1,type:"add"===e.type||"edit"===e.type?"textarea":"label",placeholder:"请输入"},model:{value:e.form.troBody,callback:function(t){e.$set(e.form,"troBody",t)},expression:"form.troBody"}})],1),a("u-form-item",{attrs:{label:"隐患分类","label-width":"150",prop:"troType"}},[a("efItem",{attrs:{data:e.formList.dy_troclaGetType,type:"add"===e.type||"edit"===e.type?"select":"label",name:"text",id:"id"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.typeChange.apply(void 0,arguments)}},model:{value:e.form.troType,callback:function(t){e.$set(e.form,"troType",t)},expression:"form.troType"}})],1),a("u-form-item",{attrs:{label:"分类依据","label-width":"150",prop:"troTypeId"}},[a("efItem",{attrs:{data:e.formList.dy_troclaGetBasis,require:e.form.troType,errMessage:"请先选择隐患分类",modelId:e.form.troTypeId,type:"add"===e.type||"edit"===e.type?"select":"label",name:"troTypeBasis",id:"id"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"troTypeId",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"troTypeId",t)},change:function(t){arguments[0]=t=e.$handleEvent(t),e.troTypeIdChange.apply(void 0,arguments)}},model:{value:e.form.troTypeBasis,callback:function(t){e.$set(e.form,"troTypeBasis",t)},expression:"form.troTypeBasis"}})],1),a("u-form-item",{attrs:{label:"隐患分级","label-width":"150",prop:"troTypeLevel"}},[a("efItem",{attrs:{isRightIcon:!1,placeholder:""},model:{value:e.form.troTypeLevel,callback:function(t){e.$set(e.form,"troTypeLevel",t)},expression:"form.troTypeLevel"}})],1),a("u-form-item",{attrs:{prop:"troResName",label:"责任人","label-width":"150"}},[a("efItem",{attrs:{type:"add"===e.type||"edit"===e.type?"lxr":"label",title:"填写联系方式"},model:{value:e.form.troResName,callback:function(t){e.$set(e.form,"troResName",t)},expression:"form.troResName"}})],1),a("u-form-item",{attrs:{label:"属地供电单位","label-width":"180",prop:"sdgddw"}},[a("efItem",{attrs:{data:e.formList.dy_listDW,type:"add"===e.type||"edit"===e.type?"select":"label",name:"text",id:"id"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.sdgddwChange.apply(void 0,arguments)}},model:{value:e.form.sdgddw,callback:function(t){e.$set(e.form,"sdgddw",t)},expression:"form.sdgddw"}})],1),a("u-form-item",{attrs:{label:"属地供电单位联系人","label-width":"270",prop:"sdlxr"}},[a("efItem",{attrs:{data:e.formList.dy_listman,require:e.form.sdgddw,errMessage:"请先选择属地供电单位",type:"add"===e.type||"edit"===e.type?"select":"label",name:"text",id:"id"},model:{value:e.form.sdlxr,callback:function(t){e.$set(e.form,"sdlxr",t)},expression:"form.sdlxr"}})],1),a("u-form-item",{attrs:{prop:"troSetp",label:"整治措施","label-width":"150"}},[a("efItem",{attrs:{title:"整治措施",isRightIcon:!1,type:"add"===e.type||"edit"===e.type?"textarea":"label",placeholder:"请输入"},model:{value:e.form.troSetp,callback:function(t){e.$set(e.form,"troSetp",t)},expression:"form.troSetp"}})],1),a("u-form-item",{attrs:{prop:"findDate",label:"发现时间","label-width":"150"}},[a("efItem",{attrs:{endTime:e.$store.state.nowDate,type:"add"===e.type||"edit"===e.type?"time":"label"},model:{value:e.form.findDate,callback:function(t){e.$set(e.form,"findDate",t)},expression:"form.findDate"}})],1),a("u-form-item",{attrs:{prop:"findUserName",label:"发现人员","label-width":"150"}},[a("efItem",{attrs:{data:e.dy_teamUserList,modelId:e.form.findUserid,type:"add"===e.type||"edit"===e.type?"people":"label"},on:{"update:modelId":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"findUserid",t)},"update:model-id":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form,"findUserid",t)}},model:{value:e.form.findUserName,callback:function(t){e.$set(e.form,"findUserName",t)},expression:"form.findUserName"}})],1),a("u-form-item",{attrs:{prop:"defReport",label:"隐患简报","label-width":"150","label-position":"top"}},[a("v-uni-view",{staticClass:"flex1"},[a("efItem",{attrs:{isRightIcon:!1,placeholder:"",position:!0,isRightLabel:!1},scopedSlots:e._u(["add"===e.type||"edit"===e.type?{key:"right",fn:function(){return[a("v-uni-view",{staticClass:"flex1"},[a("u-button",{staticClass:"custom-style",staticStyle:{float:"right"},attrs:{size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.generateDefReport.apply(void 0,arguments)}}},[e._v("生成")])],1)]},proxy:!0}:null],null,!0)}),"add"===e.type||"edit"===e.type?a("v-uni-view",[a("u-input",{attrs:{disabled:"add"!==e.type&&"edit"!==e.type,clearable:"add"===e.type||"edit"===e.type,border:!0,placeholder:"请输入或生成",type:"textarea"},model:{value:e.form.troReport,callback:function(t){e.$set(e.form,"troReport",t)},expression:"form.troReport"}})],1):e._e(),"details"===e.type?a("v-uni-view",{staticClass:"f-s-24"},[e._v(e._s(e.form.troReport))]):e._e()],1)],1),a("u-form-item",{attrs:{prop:"troPics",label:"隐患照片","label-width":"150","label-position":"top"}},[a("chooseImage",{ref:"chooseImage",attrs:{images:e.form.troPics,type:e.type,picType:"3"}})],1),a("u-form-item",{attrs:{prop:"defPicROList",label:"隐患录音","label-width":"150","label-position":"top"}},[a("chooseAudio",{ref:"chooseAudio",attrs:{audioList:e.form.troVois,type:e.type,picType:"3"}})],1),a("u-form-item",{attrs:{prop:"troVids",label:"隐患视频","label-width":"150","label-position":"top"}},[a("chooseVideo",{ref:"chooseVideo",attrs:{videoList:e.form.troVids,type:e.type,picType:"3"}})],1)],1),"add"===e.type||"edit"===e.type?a("u-button",{directives:[{name:"permission",rawName:"v-permission",value:["user","teamLeader","zhuanze"],expression:"['user','teamLeader','zhuanze']"}],staticClass:"btn custom-style",attrs:{type:"primary",shape:"circle",ripple:!0,loading:e.submitLoading},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save(2)}}},[e._v("提交")]):e._e(),"add"===e.type||"edit"===e.type?a("u-button",{directives:[{name:"permission",rawName:"v-permission",value:["user","teamLeader","zhuanze"],expression:"['user','teamLeader','zhuanze']"}],staticClass:"btn btn-plain",attrs:{shape:"circle",ripple:!0,plain:!0,loading:e.saveLoading},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save(1)}}},[e._v("保存")]):e._e(),["2"].includes(e.state)?a("u-button",{directives:[{name:"permission",rawName:"v-permission",value:"teamLeader",expression:"'teamLeader'"}],staticClass:"btn custom-style",attrs:{type:"primary",shape:"circle",ripple:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toExamine()}}},[e._v("审核")]):e._e(),["3"].includes(e.state)?a("v-uni-view",{directives:[{name:"permission",rawName:"v-permission",value:["user","teamLeader","zhuanze"],expression:"['user','teamLeader','zhuanze']"}],staticClass:"flex-around"},[a("u-button",{staticClass:"btn btn-plain",attrs:{shape:"circle",ripple:!0,plain:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toHandle.apply(void 0,arguments)}}},[e._v("处理")]),a("u-button",{staticClass:"btn custom-style",attrs:{type:"primary",shape:"circle",ripple:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toTour.apply(void 0,arguments)}}},[e._v("维护")])],1):e._e(),a("u-toast",{ref:"uToast"})],1)},i=[]},bbe0:function(e,t,a){"use strict";a.r(t);var o=a("9d45"),r=a("bca9");for(var i in r)"default"!==i&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a("d9da");var n,d=a("f0c5"),l=Object(d["a"])(r["default"],o["b"],o["c"],!1,null,"25ec0090",null,!1,o["a"],n);t["default"]=l.exports},bca9:function(e,t,a){"use strict";a.r(t);var o=a("0f50"),r=a.n(o);for(var i in o)"default"!==i&&function(e){a.d(t,e,(function(){return o[e]}))}(i);t["default"]=r.a},d693:function(e,t,a){var o=a("24fb");t=o(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */\r\n/*每个页面公共css */uni-page-body[data-v-1fad9279]{background-color:#dde4f2;font-family:PingFangSC-Medium,PingFang SC}.flex-center[data-v-1fad9279]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-around[data-v-1fad9279]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-around;justify-content:space-around;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-between[data-v-1fad9279]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-start[data-v-1fad9279]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-end[data-v-1fad9279]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-column[data-v-1fad9279]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.flex-wrap[data-v-1fad9279]{-webkit-flex-wrap:wrap;flex-wrap:wrap}.flex[data-v-1fad9279]{display:-webkit-box;display:-webkit-flex;display:flex}.flex1[data-v-1fad9279]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.align-center[data-v-1fad9279]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.text-center[data-v-1fad9279]{text-align:center}.m-8[data-v-1fad9279]{margin:%?8?%}.m-16[data-v-1fad9279]{margin:%?16?%}.p-8[data-v-1fad9279]{padding:%?8?%}.p-16[data-v-1fad9279]{padding:%?16?%}.m-t-16[data-v-1fad9279]{margin-top:%?16?%}.m-t-8[data-v-1fad9279]{margin-top:%?8?%}.m-t-24[data-v-1fad9279]{margin-top:%?24?%}.m-t-32[data-v-1fad9279]{margin-top:%?32?%}.m-t-40[data-v-1fad9279]{margin-top:%?40?%}.m-l-16[data-v-1fad9279]{margin-left:%?16?%}.m-l-24[data-v-1fad9279]{margin-left:%?24?%}.m-l-32[data-v-1fad9279]{margin-left:%?32?%}.m-l-40[data-v-1fad9279]{margin-left:%?40?%}.m-l-8[data-v-1fad9279]{margin-left:%?8?%}.m-r-8[data-v-1fad9279]{margin-right:%?8?%}.m-r-16[data-v-1fad9279]{margin-right:%?16?%}.m-r-24[data-v-1fad9279]{margin-right:%?24?%}.m-b-16[data-v-1fad9279]{margin-bottom:%?16?%}.m-b-32[data-v-1fad9279]{margin-bottom:%?32?%}.p-l-8[data-v-1fad9279]{padding-left:%?8?%}.p-l-16[data-v-1fad9279]{padding-left:%?16?%}.p-b-24[data-v-1fad9279]{padding-bottom:%?24?%}.p-b-32[data-v-1fad9279]{padding-bottom:%?32?%}.p-b-48[data-v-1fad9279]{padding-bottom:%?48?%}.text-ellipsis[data-v-1fad9279]{width:0;overflow:hidden;\r\n  /*超出部分隐藏*/white-space:nowrap;\r\n  /*不换行*/text-overflow:ellipsis\r\n  /*超出部分文字以...显示*/}.container[data-v-1fad9279]{margin:0 %?16?%;background:#fff;-webkit-box-shadow:0 %?4?% %?16?% 0 rgba(14,23,37,.08);box-shadow:0 %?4?% %?16?% 0 rgba(14,23,37,.08);-webkit-border-radius:%?24?%;border-radius:%?24?%;padding:%?15?% %?40?%;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden}.ef-btn[data-v-1fad9279]{width:%?200?%;height:%?60?%!important;-webkit-box-shadow:0 %?4?% %?16?% 0 rgba(14,23,37,.08);box-shadow:0 %?4?% %?16?% 0 rgba(14,23,37,.08);-webkit-border-radius:%?30?%;border-radius:%?30?%;margin-top:%?50?%;background-color:#05b2cc!important;font-size:%?24?%!important}.bg-orange[data-v-1fad9279]{background-color:#f7b500}.bg-blue[data-v-1fad9279]{background-color:#05b2cc}.bg-green[data-v-1fad9279]{background-color:#00be27}.base-green-text[data-v-1fad9279]{color:#05b2cc}.gray-text[data-v-1fad9279]{color:#97a4ae}.green-text[data-v-1fad9279]{color:#05b2cc}.red-text[data-v-1fad9279]{color:red}.orange-text[data-v-1fad9279]{color:orange}.border-b-gray[data-v-1fad9279]{padding-bottom:%?16?%;border-bottom:1px solid #dde4f2}.title-icon[data-v-1fad9279]{height:%?32?%}.ef-btn-normal[data-v-1fad9279]{width:%?200?%;height:%?60?%!important;margin:%?20?% auto}.btn-primary[data-v-1fad9279]{background-color:#05b2cc!important;color:#fff!important}.btn-normal[data-v-1fad9279]{color:#05b2cc!important}.my-video[data-v-1fad9279]{position:fixed;top:0;left:0;bottom:0;right:0;height:100%;width:100%;background-color:rgba(0,0,0,.5);z-index:3000}.f-s-24[data-v-1fad9279]{font-size:%?24?%}.btn[data-v-1fad9279]{width:%?200?%;height:%?60?%!important;margin-top:%?24?%}.btn-plain[data-v-1fad9279]{border-color:#05b2cc;color:#05b2cc}.custom-style[data-v-1fad9279]{background-color:#05b2cc!important;color:#fff}body.?%PAGE?%[data-v-1fad9279]{background-color:#dde4f2}',""]),e.exports=t},d9da:function(e,t,a){"use strict";var o=a("e703"),r=a.n(o);r.a},e703:function(e,t,a){var o=a("571a");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var r=a("4f06").default;r("bfff7750",o,!0,{sourceMap:!1,shadowMode:!1})},ec77:function(e,t,a){"use strict";var o=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.getTroTypeLevel=t.trotreeSubmit=t.depleaderListman=t.trotreemSubmit=t.troclaGetBasis=t.troclaGetType=t.trotreehSave=t.trotreeDetail=t.trotreeList=t.troexthSave=t.troextDetail=t.troextmSubmit=t.troextSubmit=t.troextList=void 0;var r=o(a("5f30")),i=function(e){return(0,r.default)({url:"/blade-sd/troext/list",method:"get",data:e})};t.troextList=i;var n=function(e){return(0,r.default)({url:"/blade-sd/troext/submit",method:"post",data:e})};t.troextSubmit=n;var d=function(e){return(0,r.default)({url:"/blade-sd/troextm/submit",method:"post",data:e})};t.troextmSubmit=d;var l=function(e){return(0,r.default)({url:"/blade-sd/troext/detail",method:"get",data:e})};t.troextDetail=l;var s=function(e){return(0,r.default)({url:"/blade-sd/troexth/save",method:"post",data:e})};t.troexthSave=s;var f=function(e){return(0,r.default)({url:"/blade-sd/trotree/list",method:"get",data:e})};t.trotreeList=f;var c=function(e){return(0,r.default)({url:"/blade-sd/trotree/detail",method:"get",data:e})};t.trotreeDetail=c;var m=function(e){return(0,r.default)({url:"/blade-sd/trotreeh/save",method:"post",data:e})};t.trotreehSave=m;var u=function(e){return(0,r.default)({url:"/blade-sd/trocla/getType",method:"get",data:e})};t.troclaGetType=u;var p=function(e){return(0,r.default)({url:"/blade-sd/trocla/getBasis",method:"get",data:e})};t.troclaGetBasis=p;var b=function(e){return(0,r.default)({url:"/blade-sd/trotreem/submit",method:"post",data:e})};t.trotreemSubmit=b;var h=function(e){return(0,r.default)({url:"/blade-sd/depleader/listman",method:"get",data:e})};t.depleaderListman=h;var v=function(e){return(0,r.default)({url:"/blade-sd/trotree/submit",method:"post",data:e})};t.trotreeSubmit=v;var y=function(e){return(0,r.default)({url:"/trocla/getTroTypeLevel",method:"get",data:e})};t.getTroTypeLevel=y},f2b4:function(e,t,a){var o=a("d693");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var r=a("4f06").default;r("4b74e18c",o,!0,{sourceMap:!1,shadowMode:!1})}}]);