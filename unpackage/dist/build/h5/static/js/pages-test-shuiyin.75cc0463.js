(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-test-shuiyin"],{"168c":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.takePhoto.apply(void 0,arguments)}}},[t._v("拍照"+t._s(t.imgList.length))]),t.imgList.length>0?t._l(t.imgList,(function(e,i){return n("v-uni-view",{key:i},[n("v-uni-image",{attrs:{mode:"widthFix",src:e.url},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.preview(e.url)}}})],1)})):t._e(),n("v-uni-view",{staticStyle:{position:"absolute",top:"-999999px"}},[n("v-uni-view",[n("v-uni-canvas",{style:{width:t.w,height:t.h},attrs:{"canvas-id":"firstCanvas"}})],1)],1)],2)},a=[]},"3cfd":function(t,e,n){"use strict";var i=n("4ea4");n("4160"),n("26e9"),n("d3b7"),n("e25e"),n("ac1f"),n("1276"),n("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var r=i(n("1da1")),a={data:function(){return{src:"",w:"200px",h:"200px",imgList:[]}},methods:{preview:function(t){uni.previewImage({urls:[t],current:0})},takePhoto:function(){var t=this;uni.chooseImage({count:9,success:function(e){e.tempFilePaths.forEach(function(){var e=(0,r.default)(regeneratorRuntime.mark((function e(n){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getImgWaterMark({url:n,text:"扶风线 #001\nE:106.123213\nN29.123435\n2020-02-02 00:00:00"});case 2:i=e.sent,console.log(i,"newUrl"),t.imgList.push({url:i,name:"66"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log(t.imgList,"this.imgList")}})},getImgWaterMark:function(t){var e=this;return new Promise((function(n,i){var r=e;uni.getImageInfo({src:t.url,success:function(e){r.w=e.width/3+"px",r.h=e.height/3+"px",setTimeout((function(){var a=uni.createCanvasContext("firstCanvas");a.drawImage(t.url,0,0,e.width/3,e.height/3),a.setFontSize(30),a.setFillStyle("#fff"),a.setTextAlign("right");var u=t.text.split("\n").reverse(),s=e.width/3-12;u.forEach((function(t,n){var i=e.height/3-12-42*n;a.fillText(t,s,i)})),a.draw(!0,(function(){setTimeout((function(){uni.canvasToTempFilePath({canvasId:"firstCanvas",destWidth:parseInt(r.w),destHeight:parseInt(r.h),success:function(t){n(t.tempFilePath)},fail:function(t){i(t)}})}),100)}))}),100)}})}))}}};e.default=a},"5a51":function(t,e,n){"use strict";n.r(e);var i=n("168c"),r=n("cad6");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);var u,s=n("f0c5"),c=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"499112ac",null,!1,i["a"],u);e["default"]=c.exports},cad6:function(t,e,n){"use strict";n.r(e);var i=n("3cfd"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=r.a}}]);