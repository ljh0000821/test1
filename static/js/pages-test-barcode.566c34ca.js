(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-test-barcode"],{"2f5b":function(t,e,n){"use strict";n.r(e);var a=n("9c52"),r=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=r.a},5236:function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"msgbox"},[n("v-uni-button",{staticClass:"sweep",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.start.apply(void 0,arguments)}}},[t._v("开始")]),n("v-uni-button",{staticClass:"sweep",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.end.apply(void 0,arguments)}}},[t._v("结束")]),n("v-uni-button",{staticClass:"sweep",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.get.apply(void 0,arguments)}}},[t._v("获取")])],1)},i=[]},6956:function(t,e,n){"use strict";n.r(e);var a=n("5236"),r=n("2f5b");for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);var o,c=n("f0c5"),s=Object(c["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],o);e["default"]=s.exports},"9c52":function(t,e,n){"use strict";var a=n("4ea4");n("ace4"),n("d3b7"),n("8b09"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n("aa3d")),i=a(n("2d38")),o=n("6742"),c=new i.default({sampleBits:16,sampleRate:48e3,numChannels:1}),s={data:function(){return{record:null}},mounted:function(){var t=this;r.default.get((function(e){t.record=e,console.log(t.record,"this.record")}))},methods:{start:function(){console.log(r.default,"HZRecorder"),this.record.start()},end:function(){this.record.end()},get:function(){var t=this.record.getBlob();console.log(t,"res")},convertToMp3:function(t){for(var e=o.WavHeader.readHeader(t),n=e.channels,a=e.sampleRate,r=new o.Mp3Encoder(n,a,128),i=c.getChannelData(),s=[],u=i.left&&new Int16Array(i.left.buffer,0,i.left.byteLength/2),l=i.right&&new Int16Array(i.right.buffer,0,i.right.byteLength/2),f=u.length+(l?l.length:0),d=1152,p=0;p<f;p+=d){var h=u.subarray(p,p+d),v=null,b=null;2===n?(v=l.subarray(p,p+d),b=r.encodeBuffer(h,v)):b=r.encodeBuffer(h),b.length>0&&s.push(b)}var g=r.flush();return g.length>0&&s.push(g),new Blob(s,{type:"audio/mp3"})}}};e.default=s},aa3d:function(t,e,n){"use strict";n("c19f"),n("ace4"),n("b420"),n("d3b7"),n("e25e"),n("25f0"),n("3ca3"),n("cfc3"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ddb0"),n("2b3d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(t,e){e=e||{},e.sampleBits=e.sampleBits||8,e.sampleRate=e.sampleRate||7350;var n=window.AudioContext||window.webkitAudioContext,a=new n,r=a.createMediaStreamSource(t),i=a.createGain();r.connect(i);var o=4096,c=a.createScriptProcessor(o,2,2),s={size:0,buffer:[],inputSampleRate:a.sampleRate,inputSampleBits:16,outputSampleRate:e.sampleRate,oututSampleBits:e.sampleBits,input:function(t){this.buffer.push(new Float32Array(t)),this.size+=t.length},compress:function(){for(var t=new Float32Array(this.size),e=0,n=0;n<this.buffer.length;n++)t.set(this.buffer[n],e),e+=this.buffer[n].length;var a=parseInt(this.inputSampleRate/this.outputSampleRate),r=t.length/a,i=new Float32Array(r),o=0,c=0;while(o<r)i[o]=t[c],c+=a,o++;return i},encodeWAV:function(){var t=Math.min(this.inputSampleRate,this.outputSampleRate),e=Math.min(this.inputSampleBits,this.oututSampleBits),n=this.compress(),a=n.length*(e/8),r=new ArrayBuffer(44+a),i=new DataView(r),o=1,c=0,s=function(t){for(var e=0;e<t.length;e++)i.setUint8(c+e,t.charCodeAt(e))};if(s("RIFF"),c+=4,i.setUint32(c,36+a,!0),c+=4,s("WAVE"),c+=4,s("fmt "),c+=4,i.setUint32(c,16,!0),c+=4,i.setUint16(c,1,!0),c+=2,i.setUint16(c,o,!0),c+=2,i.setUint32(c,t,!0),c+=4,i.setUint32(c,o*t*(e/8),!0),c+=4,i.setUint16(c,o*(e/8),!0),c+=2,i.setUint16(c,e,!0),c+=2,s("data"),c+=4,i.setUint32(c,a,!0),c+=4,8===e)for(var u=0;u<n.length;u++,c++){var l=Math.max(-1,Math.min(1,n[u])),f=l<0?32768*l:32767*l;f=parseInt(255/(65535/(f+32768))),i.setInt8(c,f,!0)}else for(var d=0;d<n.length;d++,c+=2){var p=Math.max(-1,Math.min(1,n[d]));i.setInt16(c,p<0?32768*p:32767*p,!0)}return new Blob([i],{type:"audio/wav"})}};this.start=function(){r.connect(c),c.connect(a.destination)},this.stop=function(){c.disconnect()},this.end=function(){a.close()},this.again=function(){c.connect(a.destination)},this.getBlob=function(){return this.stop(),s.encodeWAV()},this.play=function(t){t.src=window.URL.createObjectURL(this.getBlob())},this.upload=function(t,e){var n=new FormData;n.append("audioData",this.getBlob());var a=new XMLHttpRequest;e&&(a.upload.addEventListener("progress",(function(t){e("uploading",t)}),!1),a.addEventListener("load",(function(t){e("ok",t)}),!1),a.addEventListener("error",(function(t){e("error",t)}),!1),a.addEventListener("abort",(function(t){e("cancel",t)}),!1)),a.open("POST",t),a.send(n)},c.onaudioprocess=function(t){s.input(t.inputBuffer.getChannelData(0))}};a.throwError=function(t){throw new function(){this.toString=function(){return t}}},a.canRecording=null!=navigator.getUserMedia,a.get=function(t,e){console.log(1111111),t&&navigator.mediaDevices.getUserMedia({audio:!0}).then((function(n){console.log(222222);var r=new a(n,e);t(r)})).catch((function(t){a.throwError("无法录音，请检查设备状态")}))};var r=a;e.default=r}}]);